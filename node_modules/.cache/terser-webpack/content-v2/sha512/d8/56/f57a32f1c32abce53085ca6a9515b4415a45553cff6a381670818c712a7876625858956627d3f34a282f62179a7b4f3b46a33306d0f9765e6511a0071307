{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{\"+75Z\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",function(){return PageSizes}),__webpack_require__.d(__webpack_exports__,\"b\",function(){return PaginatorState});const PageSizes=[3,5,10,15,50,100];class PaginatorState{constructor(){this.page=1,this.pageSize=PageSizes[2],this.total=0,this.pageSizes=[]}recalculatePaginator(total){return this.total=total,this}}},AO7m:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"EnlacesModule\",function(){return enlaces_module_EnlacesModule});var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),ng_bootstrap=__webpack_require__(\"1kSV\"),ng_apexcharts=__webpack_require__(\"CV0D\"),lib_esmodule=__webpack_require__(\"e8Ap\"),dropdown_menus_module=__webpack_require__(\"JT8C\"),environment=__webpack_require__(\"AytR\"),core=__webpack_require__(\"fXoL\"),enlace_service=__webpack_require__(\"64N7\");function EnlacesComponent_div_1_a_1_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"a\",5),core.Ub(1,\"div\",6),core.Pb(2,\"img\",7),core.Tb(),core.Tb()),2&rf){const enlace_r1=core.ic().$implicit;core.pc(\"href\",enlace_r1.url,core.zc),core.Cb(2),core.pc(\"src\",enlace_r1.imagenServidorBase64,core.zc)}}function EnlacesComponent_div_1_div_2_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",6),core.Pb(1,\"img\",7),core.Tb()),2&rf){const enlace_r1=core.ic().$implicit;core.Cb(1),core.pc(\"src\",enlace_r1.imagenServidorBase64,core.zc)}}function EnlacesComponent_div_1_Template(rf,ctx){if(1&rf&&(core.Ub(0,\"div\",2),core.Fc(1,EnlacesComponent_div_1_a_1_Template,3,2,\"a\",3),core.Fc(2,EnlacesComponent_div_1_div_2_Template,2,1,\"div\",4),core.Tb()),2&rf){const enlace_r1=ctx.$implicit;core.Cb(1),core.oc(\"ngIf\",enlace_r1.url),core.Cb(1),core.oc(\"ngIf\",!enlace_r1.url)}}let enlaces_component_EnlacesComponent=(()=>{class EnlacesComponent{constructor(ref,enlaceServices){this.ref=ref,this.enlaceServices=enlaceServices,this.subscriptions=[],this.API_URL=\"\"+environment.a.apiUrl}ngOnInit(){const sb=this.enlaceServices.obtenerEnlaces().subscribe(res=>{this.list=res});this.subscriptions.push(sb),this.ref.detectChanges()}ngOnDestroy(){this.subscriptions.forEach(sb=>sb.unsubscribe())}}return EnlacesComponent.ɵfac=function(t){return new(t||EnlacesComponent)(core.Ob(core.h),core.Ob(enlace_service.a))},EnlacesComponent.ɵcmp=core.Ib({type:EnlacesComponent,selectors:[[\"app-enlaces\"]],decls:2,vars:1,consts:[[1,\"row\"],[\"class\",\"col-lg-4 col-sm-6\",4,\"ngFor\",\"ngForOf\"],[1,\"col-lg-4\",\"col-sm-6\"],[\"target\",\"_blank\",3,\"href\",4,\"ngIf\"],[\"class\",\"thumbnail text-center\",4,\"ngIf\"],[\"target\",\"_blank\",3,\"href\"],[1,\"thumbnail\",\"text-center\"],[1,\"img-enlaces\",3,\"src\"]],template:function(rf,ctx){1&rf&&(core.Ub(0,\"div\",0),core.Fc(1,EnlacesComponent_div_1_Template,3,2,\"div\",1),core.Tb()),2&rf&&(core.Cb(1),core.oc(\"ngForOf\",ctx.list))},directives:[common.l,common.m],styles:[\".img-enlaces[_ngcontent-%COMP%]{max-width:100%;max-height:150px;margin:50px 0}\"]}),EnlacesComponent})(),enlaces_module_EnlacesModule=(()=>{class EnlacesModule{}return EnlacesModule.ɵmod=core.Mb({type:EnlacesModule}),EnlacesModule.ɵinj=core.Lb({factory:function(t){return new(t||EnlacesModule)},imports:[[common.c,router.l.forChild([{path:\"\",component:enlaces_component_EnlacesComponent}]),dropdown_menus_module.a,lib_esmodule.b,ng_apexcharts.a,ng_bootstrap.f,ng_bootstrap.j]]}),EnlacesModule})()},ArPJ:function(module,__webpack_exports__,__webpack_require__){\"use strict\";function baseFilter(entities,requestObj){let entitiesResult=function(incomingArray,requestObj){if(!requestObj||!requestObj.filter)return incomingArray;let result=incomingArray;return Object.keys(requestObj.filter).forEach(keyName=>{result=result.filter(el=>el[keyName]==requestObj.filter[keyName])}),result}(entities,requestObj);entitiesResult=function(incomingArray,searchTerm=\"\"){if(!searchTerm)return incomingArray;const acceptableForSearchTypes={number:1,string:2};return incomingArray.filter(row=>{let termIsFoundInRow=!1;const keys=Object.keys(row).filter(keyName=>acceptableForSearchTypes[typeof row[keyName]]&&row[keyName]);for(const keyName of keys)if(row[keyName].toString().toLowerCase().indexOf(searchTerm)>-1){termIsFoundInRow=!0;break}return termIsFoundInRow})}(entitiesResult,requestObj.searchTerm),requestObj.sorting.column&&(entitiesResult=function(incomingArray,sortField=\"\",sortOrder=\"asc\"){if(!sortField)return incomingArray;let result=[];return result=incomingArray.sort((a,b)=>a[sortField]<b[sortField]?\"asc\"===sortOrder?-1:1:a[sortField]>b[sortField]?\"asc\"===sortOrder?1:-1:0),result}(entitiesResult,requestObj.sorting.column,requestObj.sorting.direction));const totalCount=entitiesResult.length,startPosition=(requestObj.paginator.page-1)*requestObj.paginator.pageSize;return entitiesResult=entitiesResult.slice(startPosition,startPosition+requestObj.paginator.pageSize),{items:entitiesResult,total:totalCount}}__webpack_require__.d(__webpack_exports__,\"a\",function(){return baseFilter})},BJ2y:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"b\",function(){return table_service_TableService}),__webpack_require__.d(__webpack_exports__,\"a\",function(){return crud_table_module_CRUDTableModule});class SortState{constructor(){this.column=\"id\",this.direction=\"asc\"}}var paginator_model=__webpack_require__(\"+75Z\");class GroupingState{constructor(){this.selectedRowIds=new Set,this.itemIds=[]}checkAreAllRowsSelected(){return 0!==this.itemIds.length&&this.selectedRowIds.size===this.itemIds.length}selectRow(id){return this.selectedRowIds.has(id)?this.selectedRowIds.delete(id):this.selectedRowIds.add(id),this}clearRows(_itemIds){return this.itemIds=_itemIds,this.selectedRowIds=new Set,this}isRowSelected(id){return this.selectedRowIds.has(id)}selectAllRows(){return this.itemIds.length===this.selectedRowIds.size?this.selectedRowIds=new Set:(this.selectedRowIds=new Set,this.itemIds.forEach(id=>this.selectedRowIds.add(id))),this}getSelectedRows(){return Array.from(this.selectedRowIds)}getSelectedRowsCount(){return this.selectedRowIds.size}}var BehaviorSubject=__webpack_require__(\"2Vo4\"),of=__webpack_require__(\"LRne\"),catchError=__webpack_require__(\"JIr8\"),finalize=__webpack_require__(\"nYR2\"),tap=__webpack_require__(\"vkgz\"),environment=__webpack_require__(\"AytR\");const DEFAULT_STATE={filter:{},paginator:new paginator_model.b,sorting:new SortState,searchTerm:\"\",grouping:new GroupingState,entityId:void 0};class table_service_TableService{constructor(http){this._items$=new BehaviorSubject.a([]),this._isLoading$=new BehaviorSubject.a(!1),this._isFirstLoading$=new BehaviorSubject.a(!0),this._tableState$=new BehaviorSubject.a(DEFAULT_STATE),this._errorMessage=new BehaviorSubject.a(\"\"),this._subscriptions=[],this.API_URL=environment.a.apiUrl+\"/endpoint\",this.http=http}get items$(){return this._items$.asObservable()}get isLoading$(){return this._isLoading$.asObservable()}get isFirstLoading$(){return this._isFirstLoading$.asObservable()}get errorMessage$(){return this._errorMessage.asObservable()}get subscriptions(){return this._subscriptions}get paginator(){return this._tableState$.value.paginator}get filter(){return this._tableState$.value.filter}get sorting(){return this._tableState$.value.sorting}get searchTerm(){return this._tableState$.value.searchTerm}get grouping(){return this._tableState$.value.grouping}create(item){return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.post(this.API_URL,item).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"CREATE ITEM\",err),Object(of.a)({id:void 0}))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}find(tableState){const url=this.API_URL+\"/find\";return this._errorMessage.next(\"\"),this.http.post(url,tableState).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"FIND ITEMS\",err),Object(of.a)({items:[],total:0}))))}getItemById(id){return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.get(`${this.API_URL}/${id}`).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"GET ITEM BY IT\",id,err),Object(of.a)({id:void 0}))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}update(item){const url=`${this.API_URL}/${item.id}`;return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.put(url,item).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"UPDATE ITEM\",item,err),Object(of.a)(item))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}updateStatusForItems(ids,status){return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.put(this.API_URL+\"/updateStatus\",{ids:ids,status:status}).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"UPDATE STATUS FOR SELECTED ITEMS\",ids,status,err),Object(of.a)([]))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}delete(id){return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.delete(`${this.API_URL}/${id}`).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"DELETE ITEM\",id,err),Object(of.a)({}))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}deleteItems(ids=[]){return this._isLoading$.next(!0),this._errorMessage.next(\"\"),this.http.put(this.API_URL+\"/deleteItems\",{ids:ids}).pipe(Object(catchError.a)(err=>(this._errorMessage.next(err),console.error(\"DELETE SELECTED ITEMS\",ids,err),Object(of.a)([]))),Object(finalize.a)(()=>this._isLoading$.next(!1)))}fetch(){this._isLoading$.next(!0),this._errorMessage.next(\"\");const request=this.find(this._tableState$.value).pipe(Object(tap.a)(res=>{this._items$.next(res.items),this.patchStateWithoutFetch({paginator:this._tableState$.value.paginator.recalculatePaginator(res.total)})}),Object(catchError.a)(err=>(this._errorMessage.next(err),Object(of.a)({items:[],total:0}))),Object(finalize.a)(()=>{this._isLoading$.next(!1);const itemIds=this._items$.value.map(el=>el.id);this.patchStateWithoutFetch({grouping:this._tableState$.value.grouping.clearRows(itemIds)})})).subscribe();this._subscriptions.push(request)}setDefaults(){this.patchStateWithoutFetch({filter:{}}),this.patchStateWithoutFetch({sorting:new SortState}),this.patchStateWithoutFetch({grouping:new GroupingState}),this.patchStateWithoutFetch({searchTerm:\"\"}),this.patchStateWithoutFetch({paginator:new paginator_model.b}),this._isFirstLoading$.next(!0),this._isLoading$.next(!0),this._tableState$.next(DEFAULT_STATE),this._errorMessage.next(\"\")}patchState(patch){this.patchStateWithoutFetch(patch),this.fetch()}patchStateWithoutFetch(patch){const newState=Object.assign(this._tableState$.value,patch);this._tableState$.next(newState)}}__webpack_require__(\"tk/3\");var core=__webpack_require__(\"fXoL\"),common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),lib_esmodule=__webpack_require__(\"e8Ap\");let crud_table_module_CRUDTableModule=(()=>{class CRUDTableModule{}return CRUDTableModule.ɵmod=core.Mb({type:CRUDTableModule}),CRUDTableModule.ɵinj=core.Lb({factory:function(t){return new(t||CRUDTableModule)},imports:[[common.c,fesm2015_forms.g,lib_esmodule.b]]}),CRUDTableModule})()}}]);","name":"12-es2015.4edc757ffd9d58422f3d.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[12],{\n\n/***/ \"+75Z\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PageSizes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return PaginatorState; });\nconst PageSizes = [3, 5, 10, 15, 50, 100];\nclass PaginatorState {\n    constructor() {\n        this.page = 1;\n        this.pageSize = PageSizes[2];\n        this.total = 0;\n        this.pageSizes = [];\n    }\n    recalculatePaginator(total) {\n        this.total = total;\n        return this;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"AO7m\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"EnlacesModule\", function() { return /* binding */ enlaces_module_EnlacesModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 3 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./node_modules/@ng-bootstrap/ng-bootstrap/__ivy_ngcc__/fesm2015/ng-bootstrap.js + 7 modules\nvar ng_bootstrap = __webpack_require__(\"1kSV\");\n\n// EXTERNAL MODULE: ./node_modules/ng-apexcharts/__ivy_ngcc__/fesm2015/ng-apexcharts.js + 4 modules\nvar ng_apexcharts = __webpack_require__(\"CV0D\");\n\n// EXTERNAL MODULE: ./node_modules/ng-inline-svg/__ivy_ngcc__/lib_esmodule/index.js + 7 modules\nvar lib_esmodule = __webpack_require__(\"e8Ap\");\n\n// EXTERNAL MODULE: ./src/app/_metronic_portal/partials/content/dropdown-menus/dropdown-menus.module.ts\nvar dropdown_menus_module = __webpack_require__(\"JT8C\");\n\n// EXTERNAL MODULE: ./src/environments/environment.ts\nvar environment = __webpack_require__(\"AytR\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./src/app/services/enlace.service.ts\nvar enlace_service = __webpack_require__(\"64N7\");\n\n// CONCATENATED MODULE: ./src/app/portal/enlaces/enlaces.component.ts\n\r\n\r\n\r\n\r\nfunction EnlacesComponent_div_1_a_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Ub\" /* ɵɵelementStart */](0, \"a\", 5);\r\n        core[\"Ub\" /* ɵɵelementStart */](1, \"div\", 6);\r\n        core[\"Pb\" /* ɵɵelement */](2, \"img\", 7);\r\n        core[\"Tb\" /* ɵɵelementEnd */]();\r\n        core[\"Tb\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const enlace_r1 = core[\"ic\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"pc\" /* ɵɵpropertyInterpolate */](\"href\", enlace_r1.url, core[\"zc\" /* ɵɵsanitizeUrl */]);\r\n        core[\"Cb\" /* ɵɵadvance */](2);\r\n        core[\"pc\" /* ɵɵpropertyInterpolate */](\"src\", enlace_r1.imagenServidorBase64, core[\"zc\" /* ɵɵsanitizeUrl */]);\r\n    }\r\n}\r\nfunction EnlacesComponent_div_1_div_2_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Ub\" /* ɵɵelementStart */](0, \"div\", 6);\r\n        core[\"Pb\" /* ɵɵelement */](1, \"img\", 7);\r\n        core[\"Tb\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const enlace_r1 = core[\"ic\" /* ɵɵnextContext */]().$implicit;\r\n        core[\"Cb\" /* ɵɵadvance */](1);\r\n        core[\"pc\" /* ɵɵpropertyInterpolate */](\"src\", enlace_r1.imagenServidorBase64, core[\"zc\" /* ɵɵsanitizeUrl */]);\r\n    }\r\n}\r\nfunction EnlacesComponent_div_1_Template(rf, ctx) {\r\n    if (rf & 1) {\r\n        core[\"Ub\" /* ɵɵelementStart */](0, \"div\", 2);\r\n        core[\"Fc\" /* ɵɵtemplate */](1, EnlacesComponent_div_1_a_1_Template, 3, 2, \"a\", 3);\r\n        core[\"Fc\" /* ɵɵtemplate */](2, EnlacesComponent_div_1_div_2_Template, 2, 1, \"div\", 4);\r\n        core[\"Tb\" /* ɵɵelementEnd */]();\r\n    }\r\n    if (rf & 2) {\r\n        const enlace_r1 = ctx.$implicit;\r\n        core[\"Cb\" /* ɵɵadvance */](1);\r\n        core[\"oc\" /* ɵɵproperty */](\"ngIf\", enlace_r1.url);\r\n        core[\"Cb\" /* ɵɵadvance */](1);\r\n        core[\"oc\" /* ɵɵproperty */](\"ngIf\", !enlace_r1.url);\r\n    }\r\n}\r\nlet enlaces_component_EnlacesComponent = /*@__PURE__*/ (() => {\r\n    class EnlacesComponent {\r\n        constructor(ref, enlaceServices) {\r\n            this.ref = ref;\r\n            this.enlaceServices = enlaceServices;\r\n            this.subscriptions = [];\r\n            this.API_URL = `${environment[\"a\" /* environment */].apiUrl}`;\r\n        }\r\n        ngOnInit() {\r\n            const sb = this.enlaceServices.obtenerEnlaces().subscribe(res => {\r\n                this.list = res;\r\n            });\r\n            this.subscriptions.push(sb);\r\n            this.ref.detectChanges();\r\n        }\r\n        ngOnDestroy() {\r\n            this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n        }\r\n    }\r\n    EnlacesComponent.ɵfac = function EnlacesComponent_Factory(t) { return new (t || EnlacesComponent)(core[\"Ob\" /* ɵɵdirectiveInject */](core[\"h\" /* ChangeDetectorRef */]), core[\"Ob\" /* ɵɵdirectiveInject */](enlace_service[\"a\" /* EnlaceService */])); };\r\n    EnlacesComponent.ɵcmp = core[\"Ib\" /* ɵɵdefineComponent */]({ type: EnlacesComponent, selectors: [[\"app-enlaces\"]], decls: 2, vars: 1, consts: [[1, \"row\"], [\"class\", \"col-lg-4 col-sm-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-4\", \"col-sm-6\"], [\"target\", \"_blank\", 3, \"href\", 4, \"ngIf\"], [\"class\", \"thumbnail text-center\", 4, \"ngIf\"], [\"target\", \"_blank\", 3, \"href\"], [1, \"thumbnail\", \"text-center\"], [1, \"img-enlaces\", 3, \"src\"]], template: function EnlacesComponent_Template(rf, ctx) {\r\n            if (rf & 1) {\r\n                core[\"Ub\" /* ɵɵelementStart */](0, \"div\", 0);\r\n                core[\"Fc\" /* ɵɵtemplate */](1, EnlacesComponent_div_1_Template, 3, 2, \"div\", 1);\r\n                core[\"Tb\" /* ɵɵelementEnd */]();\r\n            }\r\n            if (rf & 2) {\r\n                core[\"Cb\" /* ɵɵadvance */](1);\r\n                core[\"oc\" /* ɵɵproperty */](\"ngForOf\", ctx.list);\r\n            }\r\n        }, directives: [common[\"l\" /* NgForOf */], common[\"m\" /* NgIf */]], styles: [\".img-enlaces[_ngcontent-%COMP%]{max-width:100%;max-height:150px;margin:50px 0}\"] });\r\n    return EnlacesComponent;\r\n})();\r\n\n// CONCATENATED MODULE: ./src/app/portal/enlaces/enlaces.module.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet enlaces_module_EnlacesModule = /*@__PURE__*/ (() => {\r\n    class EnlacesModule {\r\n    }\r\n    EnlacesModule.ɵmod = core[\"Mb\" /* ɵɵdefineNgModule */]({ type: EnlacesModule });\r\n    EnlacesModule.ɵinj = core[\"Lb\" /* ɵɵdefineInjector */]({ factory: function EnlacesModule_Factory(t) { return new (t || EnlacesModule)(); }, imports: [[\r\n                common[\"c\" /* CommonModule */],\r\n                router[\"l\" /* RouterModule */].forChild([\r\n                    {\r\n                        path: '',\r\n                        component: enlaces_component_EnlacesComponent,\r\n                    }\r\n                ]),\r\n                dropdown_menus_module[\"a\" /* DropdownMenusModule */],\r\n                lib_esmodule[\"b\" /* InlineSVGModule */],\r\n                ng_apexcharts[\"a\" /* NgApexchartsModule */],\r\n                ng_bootstrap[\"f\" /* NgbDropdownModule */],\r\n                ng_bootstrap[\"j\" /* NgbModule */]\r\n            ]] });\r\n    return EnlacesModule;\r\n})();\r\n\n\n/***/ }),\n\n/***/ \"ArPJ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ baseFilter; });\n\n// UNUSED EXPORTS: sortArray, filterArray, searchInArray\n\n// CONCATENATED MODULE: ./src/app/_fake/fake-helpers/http-extenstions.ts\nfunction baseFilter(entities, requestObj) {\n    // Filtration\n    let entitiesResult = filterArray(entities, requestObj);\n    // Search\n    entitiesResult = searchInArray(entitiesResult, requestObj.searchTerm);\n    // Sorting\n    // start\n    if (requestObj.sorting.column) {\n        entitiesResult = sortArray(entitiesResult, requestObj.sorting.column, requestObj.sorting.direction);\n    }\n    // end\n    // Paginator\n    // start\n    const totalCount = entitiesResult.length;\n    const startPosition = (requestObj.paginator.page - 1) * requestObj.paginator.pageSize;\n    const endPosition = startPosition + requestObj.paginator.pageSize;\n    entitiesResult = entitiesResult.slice(startPosition, endPosition);\n    // end\n    const responseObj = {\n        items: entitiesResult,\n        total: totalCount\n    };\n    return responseObj;\n}\nfunction sortArray(incomingArray, sortField = '', sortOrder = 'asc') {\n    if (!sortField) {\n        return incomingArray;\n    }\n    let result = [];\n    result = incomingArray.sort((a, b) => {\n        if (a[sortField] < b[sortField]) {\n            return sortOrder === 'asc' ? -1 : 1;\n        }\n        if (a[sortField] > b[sortField]) {\n            return sortOrder === 'asc' ? 1 : -1;\n        }\n        return 0;\n    });\n    return result;\n}\nfunction filterArray(incomingArray, requestObj) {\n    if (!requestObj || !requestObj.filter) {\n        return incomingArray;\n    }\n    let result = incomingArray;\n    const filtrationFields = Object.keys(requestObj.filter);\n    filtrationFields.forEach((keyName) => {\n        // tslint:disable-next-line:triple-equals\n        result = result.filter(el => el[keyName] == requestObj.filter[keyName]);\n    });\n    return result;\n}\nfunction searchInArray(incomingArray, searchTerm = '') {\n    if (!searchTerm) {\n        return incomingArray;\n    }\n    const acceptableForSearchTypes = { number: 1, string: 2 };\n    const result = incomingArray.filter(row => {\n        let termIsFoundInRow = false;\n        const keys = Object.keys(row).filter(keyName => acceptableForSearchTypes[typeof row[keyName]] && row[keyName]);\n        for (const keyName of keys) {\n            if (row[keyName].toString().toLowerCase().indexOf(searchTerm) > -1) {\n                termIsFoundInRow = true;\n                break;\n            }\n        }\n        return termIsFoundInRow;\n    });\n    return result;\n}\n\n// CONCATENATED MODULE: ./src/app/_fake/index.js\n\n\n\n/***/ }),\n\n/***/ \"BJ2y\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* reexport */ table_service_TableService; });\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ crud_table_module_CRUDTableModule; });\n\n// UNUSED EXPORTS: SortState, PageSizes, PaginatorState, GroupingState, TableExtendedService\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/table.model.ts\n\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/sort.model.ts\nclass SortState {\n    constructor() {\n        this.column = 'id'; // Id by default\n        this.direction = 'asc'; // asc by default;\n    }\n}\n\n// EXTERNAL MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/paginator.model.ts\nvar paginator_model = __webpack_require__(\"+75Z\");\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/grouping.model.ts\nclass GroupingState {\n    constructor() {\n        this.selectedRowIds = new Set();\n        this.itemIds = [];\n    }\n    checkAreAllRowsSelected() {\n        if (this.itemIds.length === 0) {\n            return false;\n        }\n        return this.selectedRowIds.size === this.itemIds.length;\n    }\n    selectRow(id) {\n        if (this.selectedRowIds.has(id)) {\n            this.selectedRowIds.delete(id);\n        }\n        else {\n            this.selectedRowIds.add(id);\n        }\n        return this;\n    }\n    // tslint:disable-next-line:variable-name\n    clearRows(_itemIds) {\n        this.itemIds = _itemIds;\n        this.selectedRowIds = new Set();\n        return this;\n    }\n    isRowSelected(id) {\n        return this.selectedRowIds.has(id);\n    }\n    selectAllRows() {\n        const areAllSelected = this.itemIds.length === this.selectedRowIds.size;\n        if (areAllSelected) {\n            this.selectedRowIds = new Set();\n        }\n        else {\n            this.selectedRowIds = new Set();\n            this.itemIds.forEach(id => this.selectedRowIds.add(id));\n        }\n        return this;\n    }\n    getSelectedRows() {\n        return Array.from(this.selectedRowIds);\n    }\n    getSelectedRowsCount() {\n        return this.selectedRowIds.size;\n    }\n}\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/search.model.ts\n\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/models/filter.model.ts\n\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/BehaviorSubject.js\nvar BehaviorSubject = __webpack_require__(\"2Vo4\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/of.js\nvar of = __webpack_require__(\"LRne\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/catchError.js\nvar catchError = __webpack_require__(\"JIr8\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/finalize.js\nvar finalize = __webpack_require__(\"nYR2\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/tap.js\nvar tap = __webpack_require__(\"vkgz\");\n\n// EXTERNAL MODULE: ./src/environments/environment.ts\nvar environment = __webpack_require__(\"AytR\");\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/services/table.service.ts\n\n\n\n\n\n\nconst DEFAULT_STATE = {\n    filter: {},\n    paginator: new paginator_model[\"b\" /* PaginatorState */](),\n    sorting: new SortState(),\n    searchTerm: '',\n    grouping: new GroupingState(),\n    entityId: undefined\n};\nclass table_service_TableService {\n    constructor(http) {\n        // Private fields\n        this._items$ = new BehaviorSubject[\"a\" /* BehaviorSubject */]([]);\n        this._isLoading$ = new BehaviorSubject[\"a\" /* BehaviorSubject */](false);\n        this._isFirstLoading$ = new BehaviorSubject[\"a\" /* BehaviorSubject */](true);\n        this._tableState$ = new BehaviorSubject[\"a\" /* BehaviorSubject */](DEFAULT_STATE);\n        this._errorMessage = new BehaviorSubject[\"a\" /* BehaviorSubject */]('');\n        this._subscriptions = [];\n        // API URL has to be overrided\n        this.API_URL = `${environment[\"a\" /* environment */].apiUrl}/endpoint`;\n        this.http = http;\n    }\n    // Getters\n    get items$() {\n        return this._items$.asObservable();\n    }\n    get isLoading$() {\n        return this._isLoading$.asObservable();\n    }\n    get isFirstLoading$() {\n        return this._isFirstLoading$.asObservable();\n    }\n    get errorMessage$() {\n        return this._errorMessage.asObservable();\n    }\n    get subscriptions() {\n        return this._subscriptions;\n    }\n    // State getters\n    get paginator() {\n        return this._tableState$.value.paginator;\n    }\n    get filter() {\n        return this._tableState$.value.filter;\n    }\n    get sorting() {\n        return this._tableState$.value.sorting;\n    }\n    get searchTerm() {\n        return this._tableState$.value.searchTerm;\n    }\n    get grouping() {\n        return this._tableState$.value.grouping;\n    }\n    // CREATE\n    // server should return the object with ID\n    create(item) {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        return this.http.post(this.API_URL, item).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('CREATE ITEM', err);\n            return Object(of[\"a\" /* of */])({ id: undefined });\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    // READ (Returning filtered list of entities)\n    find(tableState) {\n        const url = this.API_URL + '/find';\n        this._errorMessage.next('');\n        return this.http.post(url, tableState).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('FIND ITEMS', err);\n            return Object(of[\"a\" /* of */])({ items: [], total: 0 });\n        }));\n    }\n    getItemById(id) {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        const url = `${this.API_URL}/${id}`;\n        return this.http.get(url).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('GET ITEM BY IT', id, err);\n            return Object(of[\"a\" /* of */])({ id: undefined });\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    // UPDATE\n    update(item) {\n        const url = `${this.API_URL}/${item.id}`;\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        return this.http.put(url, item).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('UPDATE ITEM', item, err);\n            return Object(of[\"a\" /* of */])(item);\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    // UPDATE Status\n    updateStatusForItems(ids, status) {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        const body = { ids, status };\n        const url = this.API_URL + '/updateStatus';\n        return this.http.put(url, body).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('UPDATE STATUS FOR SELECTED ITEMS', ids, status, err);\n            return Object(of[\"a\" /* of */])([]);\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    // DELETE\n    delete(id) {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        const url = `${this.API_URL}/${id}`;\n        return this.http.delete(url).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('DELETE ITEM', id, err);\n            return Object(of[\"a\" /* of */])({});\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    // delete list of items\n    deleteItems(ids = []) {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        const url = this.API_URL + '/deleteItems';\n        const body = { ids };\n        return this.http.put(url, body).pipe(Object(catchError[\"a\" /* catchError */])(err => {\n            this._errorMessage.next(err);\n            console.error('DELETE SELECTED ITEMS', ids, err);\n            return Object(of[\"a\" /* of */])([]);\n        }), Object(finalize[\"a\" /* finalize */])(() => this._isLoading$.next(false)));\n    }\n    fetch() {\n        this._isLoading$.next(true);\n        this._errorMessage.next('');\n        const request = this.find(this._tableState$.value)\n            .pipe(Object(tap[\"a\" /* tap */])((res) => {\n            this._items$.next(res.items);\n            this.patchStateWithoutFetch({\n                paginator: this._tableState$.value.paginator.recalculatePaginator(res.total),\n            });\n        }), Object(catchError[\"a\" /* catchError */])((err) => {\n            this._errorMessage.next(err);\n            return Object(of[\"a\" /* of */])({\n                items: [],\n                total: 0\n            });\n        }), Object(finalize[\"a\" /* finalize */])(() => {\n            this._isLoading$.next(false);\n            const itemIds = this._items$.value.map((el) => {\n                const item = el;\n                return item.id;\n            });\n            this.patchStateWithoutFetch({\n                grouping: this._tableState$.value.grouping.clearRows(itemIds),\n            });\n        }))\n            .subscribe();\n        this._subscriptions.push(request);\n    }\n    setDefaults() {\n        this.patchStateWithoutFetch({ filter: {} });\n        this.patchStateWithoutFetch({ sorting: new SortState() });\n        this.patchStateWithoutFetch({ grouping: new GroupingState() });\n        this.patchStateWithoutFetch({ searchTerm: '' });\n        this.patchStateWithoutFetch({\n            paginator: new paginator_model[\"b\" /* PaginatorState */]()\n        });\n        this._isFirstLoading$.next(true);\n        this._isLoading$.next(true);\n        this._tableState$.next(DEFAULT_STATE);\n        this._errorMessage.next('');\n    }\n    // Base Methods\n    patchState(patch) {\n        this.patchStateWithoutFetch(patch);\n        this.fetch();\n    }\n    patchStateWithoutFetch(patch) {\n        const newState = Object.assign(this._tableState$.value, patch);\n        this._tableState$.next(newState);\n    }\n}\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/http.js\nvar fesm2015_http = __webpack_require__(\"tk/3\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/services/table.extended.service.ts\n\r\n\r\n\r\nlet table_extended_service_TableExtendedService = /*@__PURE__*/ (() => {\r\n    class TableExtendedService extends table_service_TableService {\r\n        constructor(http) {\r\n            super(http);\r\n        }\r\n    }\r\n    TableExtendedService.ɵfac = function TableExtendedService_Factory(t) { return new (t || TableExtendedService)(core[\"bc\" /* ɵɵinject */](fesm2015_http[\"c\" /* HttpClient */])); };\r\n    TableExtendedService.ɵprov = core[\"Kb\" /* ɵɵdefineInjectable */]({ token: TableExtendedService, factory: TableExtendedService.ɵfac, providedIn: 'root' });\r\n    return TableExtendedService;\r\n})();\r\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js\nvar fesm2015_forms = __webpack_require__(\"3Pt+\");\n\n// EXTERNAL MODULE: ./node_modules/ng-inline-svg/__ivy_ngcc__/lib_esmodule/index.js + 7 modules\nvar lib_esmodule = __webpack_require__(\"e8Ap\");\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/crud-table.module.ts\n\r\n\r\n\r\n\r\nlet crud_table_module_CRUDTableModule = /*@__PURE__*/ (() => {\r\n    class CRUDTableModule {\r\n    }\r\n    CRUDTableModule.ɵmod = core[\"Mb\" /* ɵɵdefineNgModule */]({ type: CRUDTableModule });\r\n    CRUDTableModule.ɵinj = core[\"Lb\" /* ɵɵdefineInjector */]({ factory: function CRUDTableModule_Factory(t) { return new (t || CRUDTableModule)(); }, imports: [[common[\"c\" /* CommonModule */], fesm2015_forms[\"g\" /* FormsModule */], lib_esmodule[\"b\" /* InlineSVGModule */]]] });\r\n    return CRUDTableModule;\r\n})();\r\n\n// CONCATENATED MODULE: ./src/app/_metronic_gestion/shared/crud-table/index.ts\n// Models\n\n\n\n\n\n\n// Directives\n// Services\n\n\n// Module\n\n\n\n/***/ })\n\n}]);","inputSourceMap":null}