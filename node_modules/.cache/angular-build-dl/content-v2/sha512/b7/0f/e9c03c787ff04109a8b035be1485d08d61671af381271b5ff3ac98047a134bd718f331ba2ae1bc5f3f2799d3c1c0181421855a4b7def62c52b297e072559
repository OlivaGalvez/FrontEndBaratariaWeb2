!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{LkIJ:function(t,i,a){"use strict";a.r(i),a.d(i,"EnlacesModule",function(){return X});var o,r=a("tyNb"),c=a("1kSV"),s=a("4NA8"),b=a("tk/3"),l=a("3Pt+"),u=a("fXoL"),d=((o=function(){function t(n){e(this,t),this.modal=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"eliminarEnlace",value:function(){this.modal.close()}}]),t}()).\u0275fac=function(e){return new(e||o)(u.Ob(c.a))},o.\u0275cmp=u.Ib({type:o,selectors:[["app-eliminar-enlace-modal"]],inputs:{id:"id"},decls:13,vars:0,consts:[[1,"modal-header"],[1,"modal-title","h4"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-1",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"click"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Hc(2,"Eliminar enlace"),u.Tb(),u.Tb(),u.Ub(3,"div",2),u.Ub(4,"span"),u.Hc(5,"\xbfEst\xe1s seguro de eliminar este enlace?"),u.Tb(),u.Tb(),u.Ub(6,"div",3),u.Ub(7,"div"),u.Ub(8,"button",4),u.ec("click",function(){return t.modal.dismiss()}),u.Hc(9,"Cancelar"),u.Tb(),u.Hc(10,"\xa0 "),u.Ub(11,"button",5),u.ec("click",function(){return t.eliminarEnlace()}),u.Hc(12,"Eliminar"),u.Tb(),u.Tb(),u.Tb())},styles:[""]}),o),f=a("ofXK");function m(e,t){1&e&&(u.Ub(0,"h3",7),u.Hc(1,"Editar enlace"),u.Tb())}function v(e,t){1&e&&(u.Ub(0,"h3",7),u.Hc(1,"Nuevo enlace"),u.Tb())}function p(e,t){if(1&e&&(u.Sb(0),u.Fc(1,m,2,0,"h3",6),u.Fc(2,v,2,0,"h3",6),u.Rb()),2&e){var n=u.ic();u.Cb(1),u.oc("ngIf",n.convenio.url),u.Cb(1),u.oc("ngIf",!n.convenio.url)}}function g(e,t){if(1&e&&(u.Sb(0),u.Ub(1,"form",8),u.Ub(2,"div",9),u.Ub(3,"div",10),u.Ub(4,"label",11),u.Hc(5,"Ruta del enlace"),u.Tb(),u.Pb(6,"input",12),u.Tb(),u.Tb(),u.Tb(),u.Rb()),2&e){var n=u.ic();u.Cb(1),u.oc("formGroup",n.formGroup)}}function h(e,t){if(1&e){var n=u.Vb();u.Sb(0),u.Ub(1,"button",13),u.ec("click",function(){return u.xc(n),u.ic().guardar()}),u.Hc(2,"Guardar "),u.Tb(),u.Rb()}if(2&e){var i=u.ic();u.Cb(1),u.oc("disabled",i.formGroup.invalid)}}var U,T=((U=function(){function t(n,i){e(this,t),this.fb=n,this.modal=i,this.passEntry=new u.n}return n(t,[{key:"ngOnInit",value:function(){this.loadForm()}},{key:"loadForm",value:function(){this.formGroup=this.fb.group({url:[this.convenio.url,[l.q.required]]})}},{key:"guardar",value:function(){this.convenio.url=this.formGroup.value.url,this.passEntry.emit(this.convenio.url),this.modal.close(this.convenio.url),this.formGroup.reset()}}]),t}()).\u0275fac=function(e){return new(e||U)(u.Ob(l.d),u.Ob(c.a))},U.\u0275cmp=u.Ib({type:U,selectors:[["app-enlace-modal"]],inputs:{convenio:"convenio"},outputs:{passEntry:"passEntry"},decls:9,vars:3,consts:[[1,"modal-content"],[1,"modal-header"],[4,"ngIf"],[1,"overlay","overlay-block","cursor-default","modal-body",2,"min-height","204px"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["class","card-label",4,"ngIf"],[1,"card-label"],["action","#",1,"form","form-label-right",3,"formGroup"],[1,"form-group","row"],[1,"col-lg-12"],[1,"form-label"],["type","url","pattern","https?://.+","formControlName","url",1,"form-control","form-control-lg","form-control-solid"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Fc(2,p,3,2,"ng-container",2),u.Tb(),u.Ub(3,"div",3),u.Fc(4,g,7,1,"ng-container",2),u.Tb(),u.Ub(5,"div",4),u.Ub(6,"button",5),u.ec("click",function(){return t.modal.dismiss()}),u.Hc(7,"Cancelar"),u.Tb(),u.Fc(8,h,3,1,"ng-container",2),u.Tb(),u.Tb()),2&e&&(u.Cb(2),u.oc("ngIf",t.convenio),u.Cb(2),u.oc("ngIf",t.convenio),u.Cb(4),u.oc("ngIf",t.convenio))},directives:[f.m,l.s,l.k,l.f,l.c,l.n,l.j,l.e],styles:[""]}),U),y=a("jT/F"),k=a("5eHb"),C=a("e8Ap");function I(e,t){if(1&e&&(u.Sb(0),u.Pb(1,"span",4),u.Rb()),2&e){var n=u.ic(2);u.Cb(1),u.oc("inlineSVG",n.svg)}}function w(e,t){if(1&e&&(u.Sb(0),u.Pb(1,"i",5),u.Rb()),2&e){var n=u.ic(2);u.Cb(1),u.oc("ngClass",n.icon)}}function E(e,t){if(1&e&&(u.Sb(0),u.Ub(1,"div",3),u.Fc(2,I,2,1,"ng-container",1),u.Fc(3,w,2,1,"ng-container",1),u.Tb(),u.Rb()),2&e){var n=u.ic();u.Cb(2),u.oc("ngIf",n.svg),u.Cb(1),u.oc("ngIf",n.icon)}}var P,S=["*"],F=((P=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=u.Ib({type:P,selectors:[["app-notice"]],inputs:{classes:"classes",icon:"icon",svg:"svg"},ngContentSelectors:S,decls:4,vars:2,consts:[["role","alert",1,"alert","alert-custom","alert-white","alert-shadow","gutter-b",3,"ngClass"],[4,"ngIf"],[1,"alert-text"],[1,"alert-icon","alert-icon-top"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[3,"ngClass"]],template:function(e,t){1&e&&(u.nc(),u.Ub(0,"div",0),u.Fc(1,E,4,2,"ng-container",1),u.Ub(2,"div",2),u.mc(3),u.Tb(),u.Tb()),2&e&&(u.oc("ngClass",t.classes),u.Cb(1),u.oc("ngIf",t.icon||t.svg))},directives:[f.k,f.m,C.a],encapsulation:2}),P),G=a("bSwM");function O(e,t){if(1&e&&(u.Ub(0,"button",32),u.Pb(1,"i",33),u.Hc(2," Guardar "),u.Tb()),2&e){var n=u.ic();u.oc("disabled",n.form.invalid)}}function A(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",8),u.Ub(1,"div",28),u.Ub(2,"div",10),u.Ub(3,"input",34,35),u.ec("change",function(e){return u.xc(n),u.ic().onUpload(e)}),u.Tb(),u.Tb(),u.Tb(),u.Ub(5,"div",36),u.Ub(6,"div",37),u.Pb(7,"img",38),u.Ub(8,"a",39),u.ec("click",function(){u.xc(n);var e=u.wc(4);return u.ic().reset(e)}),u.Pb(9,"i",40),u.Tb(),u.Tb(),u.Tb(),u.Tb()}if(2&e){var i=u.ic();u.Cb(6),u.oc("className",i.mostrarImagen?"mostrarImagenArea":"ocultarImagenArea"),u.Cb(1),u.oc("src",i.imagePath,u.zc)}}function x(e,t){if(1&e&&(u.Ub(0,"div",8),u.Ub(1,"div",36),u.Ub(2,"div",37),u.Pb(3,"img",41),u.Tb(),u.Tb(),u.Tb()),2&e){var n=u.ic();u.Cb(2),u.oc("className",n.mostrarImagen?"mostrarImagenArea":"ocultarImagenArea"),u.Cb(1),u.oc("src",n.imagePath,u.zc)}}function H(e,t){if(1&e){var n=u.Vb();u.Ub(0,"button",17),u.ec("click",function(){return u.xc(n),u.ic().crearEnlace()}),u.Pb(1,"i",42),u.Hc(2," A\xf1adir"),u.Tb()}}function R(e,t){if(1&e){var n=u.Vb();u.Ub(0,"div",45),u.Ub(1,"a",46),u.ec("click",function(){u.xc(n);var e=u.ic().$implicit;return u.ic().editarEnlace(e)}),u.Pb(2,"span",47),u.Tb(),u.Ub(3,"a",48),u.ec("click",function(){u.xc(n);var e=u.ic().$implicit;return u.ic().eliminarEnlace(e)}),u.Pb(4,"span",49),u.Tb(),u.Tb()}2&e&&(u.Cb(2),u.oc("inlineSVG","./assets/media/svg/icons/Communication/Write.svg"),u.Cb(2),u.oc("inlineSVG","./assets/media/svg/icons/General/Trash.svg"))}function V(e,t){if(1&e&&(u.Ub(0,"tr"),u.Ub(1,"td"),u.Ub(2,"a",43),u.Hc(3),u.Tb(),u.Tb(),u.Ub(4,"td"),u.Fc(5,R,5,2,"div",44),u.Tb(),u.Tb()),2&e){var n=t.$implicit,i=u.ic();u.Cb(2),u.pc("href",n,u.zc),u.Cb(1),u.Ic(n),u.Cb(2),u.oc("ngIf",i.mostrarBotonesGeneral)}}var M,D,B,j,_=((D=function(){function t(n,i,a,o,r,c,s){e(this,t),this.formBuilder=n,this.activatedRouter=i,this.router=a,this.uploadService=o,this.ref=r,this.toastr=c,this.modalService=s,this.disabledCampos=!0,this.mostrarBotonesGeneral=!0,this.mostrarBotonEdit=!0,this.mostrarBotonDelete=!1,this.currentDate=new Date,this.base64textString="",this.imagePath="",this.mostrarImagen=!1}return n(t,[{key:"ngOnInit",value:function(){if(this.idConvenio=this.activatedRouter.snapshot.paramMap.get("id"),this.isAddMode=!this.idConvenio,this.isAddMode?(this.disabledCampos=!1,this.mostrarBotonEdit=!1):this.mostrarBotonesGeneral=!1,this.form=this.formBuilder.group({id:0,titulo:[{value:"",disabled:this.disabledCampos},[l.q.required]],fechaAlta:[{value:"",disabled:this.disabledCampos},[l.q.required]],mostrar:[{value:null,disabled:this.disabledCampos}],file:[null],imagenServidor:[null]}),this.isAddMode){var e={year:this.currentDate.getFullYear(),month:this.currentDate.getMonth()+1,day:this.currentDate.getDate()};this.form.patchValue({fechaAlta:e})}}},{key:"ngOnDestroy",value:function(){this.suscription&&this.suscription.unsubscribe()}},{key:"guardarConvenio",value:function(){console.log(this.listEnlaces)}},{key:"reset",value:function(e){this.mostrarImagen=!1,this.form.patchValue({file:null}),e.value=""}},{key:"onUpload",value:function(e){var t=this;this.form.patchValue({file:e.target.files[0]}),this.form.get("file").updateValueAndValidity(),this.uploadService.uploadImagen(this.form.value.file).subscribe(function(e){switch(e.type){case b.e.Sent:console.log("Request has been made!");break;case b.e.ResponseHeader:console.log("Response header has been received!");break;case b.e.UploadProgress:break;case b.e.Response:var n=new FileReader;n.onload=t._handleReaderLoaded.bind(t),n.readAsBinaryString(t.form.value.file),t.form.patchValue({imagenServidor:e.body.fileName}),t.form.get("imagenServidor").updateValueAndValidity()}})}},{key:"_handleReaderLoaded",value:function(e){this.base64textString=btoa(e.target.result),this.imagePath="data:image/png;base64,"+this.base64textString,this.mostrarImagen=!0,this.ref.detectChanges()}},{key:"crearEnlace",value:function(){this.editarEnlace(void 0)}},{key:"editarEnlace",value:function(e){var t=this,n=this.modalService.open(T,{size:"lg"});n.componentInstance.convenio=null!=e?{id:void 0,url:e,titulo:"",fechaAlta:null}:{id:void 0,url:void 0,titulo:"",fechaAlta:null},n.result.then(function(e){e&&(t.listEnlaces=[],t.listEnlaces.push(e),t.ref.detectChanges())}).catch(function(e){console.log(e)})}},{key:"eliminarEnlace",value:function(e){var t=this;this.modalService.open(d,{size:"lg"}).result.then(function(e){t.listEnlaces=[],t.ref.detectChanges()}).catch(function(e){console.log(e)})}}]),t}()).\u0275fac=function(e){return new(e||D)(u.Ob(l.d),u.Ob(r.a),u.Ob(r.h),u.Ob(y.a),u.Ob(u.h),u.Ob(k.b),u.Ob(c.i))},D.\u0275cmp=u.Ib({type:D,selectors:[["app-nuevo"]],decls:62,vars:6,consts:[["id","kt_form",1,"form",3,"formGroup","ngSubmit"],[1,"text-right"],["class","btn btn-success ","type","submit","name","btn-guardar",3,"disabled",4,"ngIf"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title","mb-0","text-right"],[1,"card-body"],["data-wizard-type","step-content","data-wizard-state","current",1,"pb-5"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["type","text","formControlName","titulo","placeholder","T\xedtulo de la actividad",1,"form-control"],[1,"col-md-3"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","formControlName","fechaAlta",1,"form-control"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-calendar"],[1,"form-group","mt-0","mt-md-10"],["formControlName","mostrar",1,"example-margin"],[1,"col-12","col-md-5"],["class","row",4,"ngIf"],[1,"col-12","col-md-7"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-12"],[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center","overflow-hidden"],[4,"ngFor","ngForOf"],["type","submit","name","btn-guardar",1,"btn","btn-success",3,"disabled"],[1,"fa","fa-check"],["type","file","accept","image/*",3,"change"],["fileInput",""],[1,"col-12","text-center"],[3,"className"],["id","imagen-subida",1,"img-responsive","img-container",2,"max-width","100%",3,"src"],[1,"btn","btn-danger","btn-eliminar-img",3,"click"],[1,"fa","fa-trash"],["id","imagen-subida",1,"img-responsive",2,"max-width","100%",3,"src"],[1,"fa","fa-plus"],["target","_blank",3,"href"],["class","text-center accion",4,"ngIf"],[1,"text-center","accion"],["title","Edit enlace",1,"btn","btn-icon","btn-light","btn-hover-primary","btn-sm","mx-3",3,"click"],["cacheSVG","true",1,"svg-icon","svg-icon-md","svg-icon-primary",3,"inlineSVG"],["title","Eliminar enlace",1,"btn","btn-icon","btn-light","btn-hover-danger","btn-sm",3,"click"],["cacheSVG","true",1,"svg-icon","svg-icon-md","svg-icon-danger",3,"inlineSVG"]],template:function(e,t){if(1&e){var n=u.Vb();u.Ub(0,"form",0),u.ec("ngSubmit",function(){return t.guardarConvenio()}),u.Ub(1,"app-notice",1),u.Fc(2,O,3,1,"button",2),u.Tb(),u.Ub(3,"div",3),u.Ub(4,"div",4),u.Ub(5,"div",5),u.Ub(6,"p"),u.Hc(7,"Informaci\xf3n de la actividad"),u.Tb(),u.Tb(),u.Tb(),u.Ub(8,"div",6),u.Ub(9,"div",7),u.Ub(10,"div",8),u.Ub(11,"div",9),u.Ub(12,"div",10),u.Ub(13,"label"),u.Hc(14,"T\xedtulo"),u.Tb(),u.Pb(15,"input",11),u.Tb(),u.Tb(),u.Ub(16,"div",12),u.Ub(17,"div",10),u.Ub(18,"label"),u.Hc(19,"Fecha Alta"),u.Tb(),u.Ub(20,"div",13),u.Pb(21,"input",14,15),u.Ub(23,"div",16),u.Ub(24,"button",17),u.ec("click",function(){return u.xc(n),u.wc(22).toggle()}),u.Pb(25,"i",18),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(26,"div",12),u.Ub(27,"div",19),u.Ub(28,"mat-checkbox",20),u.Hc(29,"Mostrar en la web"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(30,"div",8),u.Ub(31,"div",21),u.Ub(32,"div",3),u.Ub(33,"div",4),u.Ub(34,"div",5),u.Ub(35,"p"),u.Hc(36,"Imagen"),u.Tb(),u.Tb(),u.Tb(),u.Ub(37,"div",6),u.Ub(38,"div",7),u.Fc(39,A,10,2,"div",22),u.Fc(40,x,4,2,"div",22),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(41,"div",23),u.Ub(42,"div",3),u.Ub(43,"div",4),u.Ub(44,"div",24),u.Ub(45,"h3",25),u.Hc(46,"Enlace"),u.Tb(),u.Tb(),u.Ub(47,"div",26),u.Fc(48,H,3,0,"button",27),u.Tb(),u.Tb(),u.Ub(49,"div",6),u.Ub(50,"div",7),u.Ub(51,"div",8),u.Ub(52,"div",28),u.Ub(53,"div",29),u.Ub(54,"table",30),u.Ub(55,"thead"),u.Ub(56,"tr"),u.Ub(57,"th"),u.Hc(58,"Ruta"),u.Tb(),u.Pb(59,"th"),u.Tb(),u.Tb(),u.Ub(60,"tbody"),u.Fc(61,V,6,3,"tr",31),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.oc("formGroup",t.form),u.Cb(2),u.oc("ngIf",t.mostrarBotonesGeneral),u.Cb(37),u.oc("ngIf",t.mostrarBotonesGeneral),u.Cb(1),u.oc("ngIf",!t.mostrarBotonesGeneral),u.Cb(8),u.oc("ngIf",t.mostrarBotonesGeneral),u.Cb(13),u.oc("ngForOf",t.listEnlaces))},directives:[l.s,l.k,l.f,F,f.m,l.c,l.j,l.e,c.h,G.a,f.l,C.a],styles:[".ocultarImagenArea[_ngcontent-%COMP%]{display:none}.mostrarImagenArea[_ngcontent-%COMP%]{display:block;margin:10px;height:auto;overflow:auto}.btn-eliminar-img[_ngcontent-%COMP%]{position:absolute;left:89%;bottom:-2%;transform:translate(-50%,-50%)}.accion[_ngcontent-%COMP%]{justify-content:space-between}"]}),D),L=((M=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=u.Ib({type:M,selectors:[["app-listado"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Ub(0,"p"),u.Hc(1,"listado works!"),u.Tb())},styles:[""]}),M),N=a("OtPg"),z=a("Kdsb"),q=a("53Di"),J=((B=function t(){e(this,t)}).\u0275mod=u.Mb({type:B}),B.\u0275inj=u.Lb({factory:function(e){return new(e||B)},imports:[[f.c,q.a,N.b,z.b,c.k,c.n,C.b]]}),B),K=a("BJ2y"),X=((j=function t(){e(this,t)}).\u0275mod=u.Mb({type:j}),j.\u0275inj=u.Lb({factory:function(e){return new(e||j)},providers:[{provide:c.c,useClass:s.a}],imports:[[r.l.forChild([{path:"nuevo",component:_},{path:"gestion/:id",component:_},{path:"listado",component:L}]),f.c,c.j,G.b,J,C.b,K.a,l.g,l.o]]}),j)},"jT/F":function(t,i,a){"use strict";a.d(i,"a",function(){return l});var o=a("z6cu"),r=a("JIr8"),c=a("AytR"),s=a("fXoL"),b=a("tk/3"),l=function(){var t=function(){function t(n){e(this,t),this.http=n,this.API_URL=c.a.apiUrl+"api/File/"}return n(t,[{key:"uploadImagen",value:function(e){var t=new FormData;return t.append("file",e,e.name),this.http.post(this.API_URL+"Upload?carpeta=imagenes",t,{reportProgress:!0,observe:"events"}).pipe(Object(r.a)(this.errorMgmt))}},{key:"uploadDocumento",value:function(e){var t=new FormData;return t.append("file",e,e.name),this.http.post(this.API_URL+"Upload?carpeta=documentos",t,{reportProgress:!0,observe:"events"}).pipe(Object(r.a)(this.errorMgmt))}},{key:"download",value:function(e){return this.http.get(this.API_URL+"Download?fileUrl="+e,{responseType:"blob"})}},{key:"errorMgmt",value:function(e){var t;return t=e.error instanceof ErrorEvent?e.error.message:"Error Code: ".concat(e.status,"\nMessage: ").concat(e.message),console.log(t),Object(o.a)(function(){return t})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.bc(b.c))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();