{"version":3,"sources":["webpack:///src/app/_fake/index.js","webpack:///src/app/portal/convenios/convenios.module.ts","webpack:///src/app/_fake/fake-helpers/http-extenstions.ts","webpack:///src/app/services/upload.service.ts","webpack:///src/app/portal/convenios/convenios.component.ts","webpack:///src/app/portal/convenios/convenios.component.html"],"names":["ConveniosModule","forChild","path","component","declarations","imports","baseFilter","entities","requestObj","entitiesResult","filterArray","searchInArray","searchTerm","sorting","column","sortArray","direction","totalCount","length","startPosition","paginator","page","pageSize","endPosition","slice","responseObj","items","total","incomingArray","sortField","sortOrder","result","sort","a","b","filter","filtrationFields","Object","keys","forEach","keyName","el","acceptableForSearchTypes","number","string","row","termIsFoundInRow","toString","toLowerCase","indexOf","UploadService","http","API_URL","apiUrl","file","formData","FormData","append","name","post","reportProgress","observe","pipe","errorMgmt","fileUrl","get","responseType","error","errorMessage","ErrorEvent","message","status","console","log","providedIn","ConveniosComponent","ref","conveniosServices","uploadService","subscriptions","list","obtenerConvenios","url","original","download","subscribe","x","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","dispatchEvent","MouseEvent","bubbles","cancelable","view","setTimeout","revokeObjectURL","remove","answers","map","key","sb","unsubscribe","selector","templateUrl","styleUrls"],"mappings":"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","file":"portal-convenios-convenios-module-es5.js","sourcesContent":["export * from \"./fake-helpers/http-extenstions\";\n//# sourceMappingURL=index.js.map","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { NgbDropdownModule, NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { NgApexchartsModule } from \"ng-apexcharts\";\r\nimport { InlineSVGModule } from \"ng-inline-svg\";\r\nimport { DropdownMenusModule } from \"src/app/_metronic_portal/partials/content/dropdown-menus/dropdown-menus.module\";\r\nimport { ConveniosComponent } from \"./convenios.component\";\r\n\r\n@NgModule({\r\n    declarations: [ConveniosComponent],\r\n    imports: [\r\n      CommonModule,\r\n      RouterModule.forChild([\r\n        {\r\n          path: '',\r\n          component: ConveniosComponent,\r\n        }\r\n      ]),\r\n      DropdownMenusModule,\r\n      InlineSVGModule,\r\n      NgApexchartsModule,\r\n      NgbDropdownModule,\r\n      NgbModule\r\n    ],\r\n  })\r\n  export class ConveniosModule {}","import { ITableState } from '../../_metronic_portal/shared/crud-table';\r\n\r\nexport function baseFilter(entities: any[], requestObj: ITableState) {\r\n  // Filtration\r\n  let entitiesResult = filterArray(entities, requestObj);\r\n  // Search\r\n  entitiesResult = searchInArray(entitiesResult, requestObj.searchTerm);\r\n\r\n  // Sorting\r\n  // start\r\n  if (requestObj.sorting.column) {\r\n    entitiesResult = sortArray(entitiesResult, requestObj.sorting.column, requestObj.sorting.direction);\r\n  }\r\n  // end\r\n\r\n  // Paginator\r\n  // start\r\n  const totalCount = entitiesResult.length;\r\n  const startPosition = (requestObj.paginator.page - 1) * requestObj.paginator.pageSize;\r\n  const endPosition = startPosition + requestObj.paginator.pageSize;\r\n  entitiesResult = entitiesResult.slice(startPosition, endPosition);\r\n  // end\r\n\r\n  const responseObj = {\r\n    items: entitiesResult,\r\n    total: totalCount\r\n  };\r\n  return responseObj;\r\n}\r\n\r\nexport function sortArray(incomingArray: any[], sortField: string = '', sortOrder: string = 'asc'): any[] {\r\n  if (!sortField) {\r\n    return incomingArray;\r\n  }\r\n\r\n  let result: any[] = [];\r\n  result = incomingArray.sort((a, b) => {\r\n    if (a[sortField] < b[sortField]) {\r\n      return sortOrder === 'asc' ? -1 : 1;\r\n    }\r\n\r\n    if (a[sortField] > b[sortField]) {\r\n      return sortOrder === 'asc' ? 1 : -1;\r\n    }\r\n\r\n    return 0;\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function filterArray(incomingArray: any[], requestObj: ITableState): any[] {\r\n  if (!requestObj || !requestObj.filter) {\r\n    return incomingArray;\r\n  }\r\n\r\n  let result: any[] = incomingArray;\r\n  const filtrationFields = Object.keys(requestObj.filter);\r\n  filtrationFields.forEach((keyName: string) => {\r\n    // tslint:disable-next-line:triple-equals\r\n    result = result.filter(el => el[keyName] == requestObj.filter[keyName]);\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function searchInArray(incomingArray: any[], searchTerm: string = ''): any[] {\r\n  if (!searchTerm) {\r\n    return incomingArray;\r\n  }\r\n\r\n  const acceptableForSearchTypes = { number: 1, string: 2 };\r\n  const result = incomingArray.filter(row => {\r\n    let termIsFoundInRow = false;\r\n    const keys = Object.keys(row).filter(keyName => acceptableForSearchTypes[typeof row[keyName]] && row[keyName]);\r\n    for (const keyName of keys) {\r\n      if (row[keyName].toString().toLowerCase().indexOf(searchTerm) > -1) {\r\n        termIsFoundInRow = true;\r\n        break;\r\n      }\r\n    }\r\n    return termIsFoundInRow;\r\n  });\r\n  return result;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\r\nimport {Observable, throwError} from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UploadService {\r\n    \r\n    API_URL = `${environment.apiUrl}` + 'api/File/';\r\n      \r\n    constructor(private http:HttpClient) { }\r\n    \r\n    uploadImagen(file):Observable<any> {\r\n    \r\n        const formData = new FormData(); \r\n          \r\n        formData.append(\"file\", file, file.name);\r\n\r\n        return this.http.post(this.API_URL + \"Upload?carpeta=imagenes\", formData, {\r\n          reportProgress: true,\r\n          observe: 'events',\r\n        }).pipe(catchError(this.errorMgmt));\r\n    } \r\n\r\n\r\n    uploadDocumento(file):Observable<any> {\r\n    \r\n      const formData = new FormData(); \r\n        \r\n      formData.append(\"file\", file, file.name);\r\n\r\n      return this.http.post(this.API_URL + \"Upload?carpeta=documentos\", formData, {\r\n        reportProgress: true,\r\n        observe: 'events',\r\n      }).pipe(catchError(this.errorMgmt));\r\n    } \r\n\r\n    download(fileUrl: string): Observable<Blob> {\r\n      \r\n      return this.http.get(this.API_URL + 'Download?fileUrl=' + fileUrl, { responseType: 'blob'});\r\n    }\r\n\r\n\r\n    errorMgmt(error: HttpErrorResponse) {\r\n      let errorMessage = '';\r\n      if (error.error instanceof ErrorEvent) {\r\n        // Get client-side error\r\n        errorMessage = error.error.message;\r\n      } else {\r\n        // Get server-side error\r\n        errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n      }\r\n      console.log(errorMessage);\r\n      return throwError(() => {\r\n        return errorMessage;\r\n      });\r\n    }\r\n\r\n  }","import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Convenio } from 'src/app/models/Convenio';\r\nimport { ConveniosService } from 'src/app/services/convenio.service';\r\nimport { UploadService } from 'src/app/services/upload.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-convenios',\r\n  templateUrl: './convenios.component.html',\r\n  styleUrls: ['./convenios.component.scss']\r\n})\r\nexport class ConveniosComponent implements OnInit, OnDestroy {\r\n\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  API_URL = `${environment.apiUrl}`;\r\n  list: Observable<Convenio[]>;\r\n\r\n  message: string;\r\n\r\n  constructor(private ref: ChangeDetectorRef, public conveniosServices: ConveniosService, private uploadService: UploadService) {  }\r\n\r\n  ngOnInit() {\r\n    this.list = this.conveniosServices.obtenerConvenios();\r\n  }\r\n\r\n  \r\n  download(url, original): void {\r\n    this.uploadService.download(url).subscribe((x) => {\r\n        var newBlob = new Blob([x], { type: \"application/pdf\" });\r\n        const data = window.URL.createObjectURL(newBlob);\r\n        \r\n        var link = document.createElement('a');\r\n        link.href = data;\r\n        link.download = original;\r\n        link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\r\n        \r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(data);\r\n            link.remove();\r\n        }, 100);\r\n    });\r\n  }\r\n\r\n  toArrayDocumentos(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  toArrayEnlaces(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n  }\r\n\r\n}\r\n","<div class=\"row\">\r\n    <div class=\"col-md-6\" *ngFor=\"let convenio of list | async\">\r\n      <div class=\"card card-custom bg-gray-100 card-stretch gutter-b\">\r\n        <!-- Header -->\r\n        <div class=\"card-header border-0 bg-barataria py-5  text-right\">\r\n          <div class=\"col-md-4 order-2 order-md-1 text-center p-0\" style=\"display: block;margin: auto;\"> \r\n            <div *ngIf=\"convenio.listEnlaces?.length > 0;then contieneEnlace else noContieneEnlace\"></div>\r\n            <ng-template #contieneEnlace>\r\n              <div class=\"p-2\" *ngFor=\"let enlace of toArrayEnlaces(convenio.listEnlaces)\">\r\n                <a href=\"{{enlace.url}}\" target=\"_blank\">\r\n                  <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{convenio.imagenServidorBase64}} />\r\n                </a>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template #noContieneEnlace>\r\n              <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{convenio.imagenServidorBase64}} />\r\n            </ng-template> \r\n          </div>\r\n          \r\n          <div class=\"col-md-8 order-1 order-md-2\">\r\n            <div class=\"text-center mb-5 pt-5\">\r\n              <div *ngIf=\"convenio.listEnlaces?.length > 0;then contieneEnlace2 else noContieneEnlace2\"></div>\r\n              <ng-template #contieneEnlace2>\r\n                <div class=\"p-2\" *ngFor=\"let enlace of toArrayEnlaces(convenio.listEnlaces)\">\r\n                  <a href=\"{{enlace.url}}\" target=\"_blank\" class=\"stretched-link text-white\"><h1 class=\"display-4\">{{convenio.titulo}}</h1></a>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template #noContieneEnlace2>\r\n                <h1 class=\"font-weight-bolder text-white mb-0\">{{convenio.titulo}}</h1>\r\n              </ng-template> \r\n            </div>\r\n          </div>\r\n  \r\n        </div>\r\n        <!-- Body -->\r\n        <div class=\"card-body p-0 position-relative overflow-hidden\">\r\n          <div id=\"kt_mixed_widget_1_chart\" class=\"card-rounded-bottom bg-barataria\" [style.height]=\"'50px'\">\r\n          </div>\r\n          <!--begin::Stats-->\r\n          <div class=\"card-spacer mt-n25\">\r\n            <!--begin::Row-->\r\n            <div class=\"row m-0\">\r\n              <div class=\"col bg-white px-6 py-8 rounded-xl mb-7\" style=\"border: 3px solid #027762;\">\r\n                <p class=\"text-dark font-weight-bold font-size-h6\">{{convenio.texto}}</p>\r\n              </div>\r\n            </div>\r\n            <!--end::Row-->\r\n            <div ngbDropdown *ngIf=\"convenio.listDocumentos?.length > 0\" class=\"row\">\r\n              <div *ngFor=\"let documento of toArrayDocumentos(convenio.listDocumentos)\" class=\"col-12 px-4 py-2\">\r\n                <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\" class=\"g-color-gray-dark-v4\"><i class=\"far fa-file mr-4\"></i>{{documento.nombre}}</a>\r\n            </div>\r\n            </div>\r\n\r\n          </div>\r\n          <!--end::Stats-->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n   "]}