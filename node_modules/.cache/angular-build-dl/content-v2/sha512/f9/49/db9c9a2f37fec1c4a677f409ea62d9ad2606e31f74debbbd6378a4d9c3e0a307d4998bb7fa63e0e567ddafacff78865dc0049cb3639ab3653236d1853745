{"version":3,"sources":["webpack:///src/app/portal/actividades/actividades.component.ts","webpack:///src/app/portal/actividades/actividades.component.html","webpack:///src/app/portal/actividades/actividades.module.ts"],"names":["ActividadesComponent","ref","actividadesService","uploadService","subscriptions","API_URL","apiUrl","paginate","fetch","sb","isLoading$","subscribe","res","isLoading","push","list","obtenerActividades","paginator","patchState","num","page","emit","paginate2","url","original","download","x","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","dispatchEvent","MouseEvent","bubbles","cancelable","view","setTimeout","revokeObjectURL","remove","actividad","cadena","fechaInicio","add","locale","format","fechaFin","answers","Object","keys","map","key","forEach","unsubscribe","selector","templateUrl","styleUrls","ActividadesModule","forChild","path","component","declarations","imports"],"mappings":"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","file":"portal-actividades-actividades-module-es5.js","sourcesContent":["import { ChangeDetectorRef, Component, EventEmitter, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { Actividad } from 'src/app/models/Actividad';\r\nimport { ActividadesService } from 'src/app/services/actividad.service';\r\nimport { UploadService } from 'src/app/services/upload.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport {\r\n  PaginatorState,\r\n} from 'src/app/_metronic_portal/shared/crud-table';\r\n\r\n@Component({\r\n  selector: 'app-actividades',\r\n  templateUrl: './actividades.component.html',\r\n  styleUrls: ['./actividades.component.scss']\r\n})\r\nexport class ActividadesComponent implements OnInit, OnDestroy {\r\n  paginator: PaginatorState;\r\n  isLoading: boolean;\r\n\r\n  private subscriptions: Subscription[] = [];\r\n  list: Observable<Actividad[]>;\r\n\r\n  API_URL = `${environment.apiUrl}`;\r\n\r\n  message: string;\r\n  @Output() paginate: EventEmitter<PaginatorState> = new EventEmitter();\r\n\r\n  constructor(private ref: ChangeDetectorRef, public actividadesService: ActividadesService, private uploadService: UploadService) {  }\r\n\r\n  ngOnInit() {\r\n    this.actividadesService.fetch();\r\n    const sb = this.actividadesService.isLoading$.subscribe(res => this.isLoading = res);\r\n    this.subscriptions.push(sb);\r\n    this.list = this.actividadesService.obtenerActividades();\r\n    this.paginator = this.actividadesService.paginator;\r\n    this.actividadesService.fetch();\r\n  }\r\n\r\n   // pagination\r\n   paginate2(paginator: PaginatorState) {\r\n    this.actividadesService.patchState({ paginator });\r\n    }\r\n\r\n    \r\n  pageChange(num: number) {\r\n    this.paginator.page = num;\r\n    this.paginate.emit(this.paginator);\r\n    this.paginate2(this.paginator);\r\n  }\r\n\r\n\r\n  \r\n  download(url, original): void {\r\n    this.uploadService.download(url).subscribe((x) => {\r\n        var newBlob = new Blob([x], { type: \"application/pdf\" });\r\n        const data = window.URL.createObjectURL(newBlob);\r\n        \r\n        var link = document.createElement('a');\r\n        link.href = data;\r\n        link.download = original;\r\n        link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\r\n        \r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(data);\r\n            link.remove();\r\n        }, 100);\r\n    });\r\n  }\r\n\r\n  convertDate (actividad : Actividad)\r\n  {\r\n    let cadena = \"\";\r\n    let fechaInicio = moment(actividad.fechaInicio).add(-1, 'M').locale('es');\r\n   \r\n    if (actividad.fechaInicio != null) {\r\n      cadena = fechaInicio.format('DD') + \" de \" + fechaInicio.format('MMMM') + \" del \" + fechaInicio.format('YYYY');\r\n\r\n      if (actividad.fechaFin != null &&  actividad.fechaInicio != actividad.fechaFin) {\r\n        let fechaFin = moment(actividad.fechaFin).add(-1, 'M').locale('es');\r\n        cadena += \" - \" + fechaFin.format('DD') + \" de \" + fechaFin.format('MMMM') + \" del \" + fechaFin.format('YYYY');\r\n      } \r\n    } \r\n   \r\n    return cadena;\r\n  }\r\n\r\n  toArrayDocumentos(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  toArrayEnlaces(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n  }\r\n}\r\n","<div class=\"barataria-image\"></div>\r\n\r\n<div class=\"container\">\r\n\r\n  <div class=\"row\" >\r\n    <div class=\"col-md-6 mb-4\" *ngFor=\"let actividad of actividadesService.items$ | async\" style=\"padding-inline: 20px;\">\r\n      <div class=\"card card-custom bg-gray-100 card-stretch gutter-b br-card-barataria\">\r\n        <!-- Header -->\r\n        <div class=\"card-header border-0 bg-barataria2 py-5  text-right\">\r\n\r\n              <div class=\"col-md-4 order-2 order-md-1 text-center p-0\" style=\"display: block;margin: auto;\"> \r\n\r\n                <div *ngIf=\"actividad.listDocumentos?.length > 0;then contieneDoc else noContieneDoc\"></div>\r\n                <ng-template #contieneDoc>\r\n                  <div class=\"p-2\" *ngFor=\"let documento of toArrayEnlaces(actividad.listDocumentos)\">\r\n                    <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\" >\r\n                      <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{actividad.imagenServidorBase64}} />\r\n                    </a>\r\n                  </div>\r\n                </ng-template>\r\n                <ng-template #noContieneDoc>\r\n                  <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{actividad.imagenServidorBase64}} />\r\n                </ng-template> \r\n\r\n              </div>\r\n          \r\n              \r\n              <div class=\"col-md-8 order-1 order-md-2\">\r\n                <div class=\"text-center mb-5 pt-5\">\r\n                  <div *ngIf=\"actividad.listDocumentos?.length > 0;then contieneDoc2 else noContieneDoc2\"></div>\r\n                  <ng-template #contieneDoc2>\r\n                    <div class=\"p-2\" *ngFor=\"let documento of toArrayEnlaces(actividad.listDocumentos)\">\r\n                      <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\" class=\"stretched-link \"><h1 class=\"display-4\">{{actividad.titulo}}</h1></a>\r\n                    </div>\r\n                  </ng-template>\r\n                  <ng-template #noContieneDoc2>\r\n                    <h1 class=\"font-weight-bolder mb-4 display-4\">{{actividad.titulo}}</h1>\r\n                  </ng-template> \r\n                  <p class=\"font-weight-bolder\">{{ convertDate(actividad) }}</p>\r\n                </div>\r\n              </div>\r\n\r\n        </div>\r\n        <!-- Body -->\r\n        <div class=\"card-body p-0 position-relative overflow-hidden\">\r\n          <div id=\"kt_mixed_widget_1_chart\" class=\"card-rounded-bottom bg-barataria2\" [style.height]=\"'50px'\">\r\n          </div>\r\n          <!--begin::Stats-->\r\n          <div class=\"card-spacer mt-n25\">\r\n            <!--begin::Row-->\r\n            <div class=\"row m-0\">\r\n                <div class=\"col bg-white px-6 py-8 rounded-xl mb-7\" style=\"border: 3px solid #D6CDA4;\">\r\n                <p class=\"text-dark font-weight-bold font-size-h6\">{{actividad.texto}}</p>\r\n                <div class=\"col-12 text-right\">\r\n                  <p class=\"small text-dark font-weight-bold mb-0 \">Socios: {{actividad.importeSocio}} €  |   No Socios: {{actividad.importeNoSocio}} €</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!--end::Row-->\r\n            <div ngbDropdown *ngIf=\"actividad.listEnlaces?.length > 0\" class=\"row\">\r\n              <div *ngFor=\"let enlace of toArrayDocumentos(actividad.listEnlaces)\" class=\"col-12 px-4 py-2\">\r\n                <a href=\"{{enlace.url}}\" target=\"_blank\" class=\"stretched-link \"><i class=\"fas fa-globe\"></i><span class=\"ml-2\">{{enlace.nombre}}</span></a>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <!--end::Stats-->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row\" *ngIf=\"(list | async)?.length > 10\">\r\n      <div class=\"col-12 text-center py-2\">\r\n        <div class=\"py-2 mr-3 text-center\">\r\n          <ng-pagination\r\n            [collectionSize]=\"paginator.total\"\r\n            [(page)]=\"paginator.page\"\r\n            [maxSize]=\"4\"\r\n            [rotate]=\"true\"\r\n            [boundaryLinks]=\"true\"\r\n            [pageSize]=\"paginator.pageSize\"\r\n            (pageChange)=\"pageChange($event)\"\r\n          ></ng-pagination>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</div>\r\n ","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { NgbDropdown, NgbDropdownModule, NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { NgApexchartsModule } from \"ng-apexcharts\";\r\nimport { InlineSVGModule } from \"ng-inline-svg\";\r\nimport { DropdownMenusModule } from \"src/app/_metronic_portal/partials/content/dropdown-menus/dropdown-menus.module\";\r\nimport { ActividadesComponent } from \"./actividades.component\";\r\nimport { CRUDTableModule } from 'src/app/_metronic_portal/shared/crud-table';\r\n\r\n@NgModule({\r\n    declarations: [ActividadesComponent],\r\n    imports: [\r\n      CommonModule,\r\n      RouterModule.forChild([\r\n        {\r\n          path: '',\r\n          component: ActividadesComponent,\r\n        }\r\n      ]),\r\n      DropdownMenusModule,\r\n      InlineSVGModule,\r\n      NgApexchartsModule,\r\n      NgbDropdownModule,\r\n      NgbModule,\r\n      CRUDTableModule,\r\n    ],\r\n  })\r\n  export class ActividadesModule {}"]}