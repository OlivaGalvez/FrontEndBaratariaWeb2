(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{LkIJ:function(t,e,n){"use strict";n.r(e),n.d(e,"EnlacesModule",function(){return D});var i=n("tyNb"),o=n("1kSV"),a=n("4NA8"),c=n("tk/3"),r=n("3Pt+"),s=n("fXoL");let b=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){}eliminarEnlace(){this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-eliminar-enlace-modal"]],inputs:{id:"id"},decls:13,vars:0,consts:[[1,"modal-header"],[1,"modal-title","h4"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-1",3,"click"],["type","button",1,"btn","btn-primary","btn-elevate",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Hc(2,"Eliminar enlace"),s.Tb(),s.Tb(),s.Ub(3,"div",2),s.Ub(4,"span"),s.Hc(5,"\xbfEst\xe1s seguro de eliminar este enlace?"),s.Tb(),s.Tb(),s.Ub(6,"div",3),s.Ub(7,"div"),s.Ub(8,"button",4),s.ec("click",function(){return e.modal.dismiss()}),s.Hc(9,"Cancelar"),s.Tb(),s.Hc(10,"\xa0 "),s.Ub(11,"button",5),s.ec("click",function(){return e.eliminarEnlace()}),s.Hc(12,"Eliminar"),s.Tb(),s.Tb(),s.Tb())},styles:[""]}),t})();var l=n("ofXK");function d(t,e){1&t&&(s.Ub(0,"h3",7),s.Hc(1,"Editar enlace"),s.Tb())}function u(t,e){1&t&&(s.Ub(0,"h3",7),s.Hc(1,"Nuevo enlace"),s.Tb())}function m(t,e){if(1&t&&(s.Sb(0),s.Fc(1,d,2,0,"h3",6),s.Fc(2,u,2,0,"h3",6),s.Rb()),2&t){const t=s.ic();s.Cb(1),s.oc("ngIf",t.convenio.url),s.Cb(1),s.oc("ngIf",!t.convenio.url)}}function f(t,e){if(1&t&&(s.Sb(0),s.Ub(1,"form",8),s.Ub(2,"div",9),s.Ub(3,"div",10),s.Ub(4,"label",11),s.Hc(5,"Ruta del enlace"),s.Tb(),s.Pb(6,"input",12),s.Tb(),s.Tb(),s.Tb(),s.Rb()),2&t){const t=s.ic();s.Cb(1),s.oc("formGroup",t.formGroup)}}function p(t,e){if(1&t){const t=s.Vb();s.Sb(0),s.Ub(1,"button",13),s.ec("click",function(){return s.xc(t),s.ic().guardar()}),s.Hc(2,"Guardar "),s.Tb(),s.Rb()}if(2&t){const t=s.ic();s.Cb(1),s.oc("disabled",t.formGroup.invalid)}}let g=(()=>{class t{constructor(t,e){this.fb=t,this.modal=e,this.passEntry=new s.n}ngOnInit(){this.loadForm()}loadForm(){this.formGroup=this.fb.group({url:[this.convenio.url,[r.q.required]]})}guardar(){this.convenio.url=this.formGroup.value.url,this.passEntry.emit(this.convenio.url),this.modal.close(this.convenio.url),this.formGroup.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(r.d),s.Ob(o.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-enlace-modal"]],inputs:{convenio:"convenio"},outputs:{passEntry:"passEntry"},decls:9,vars:3,consts:[[1,"modal-content"],[1,"modal-header"],[4,"ngIf"],[1,"overlay","overlay-block","cursor-default","modal-body",2,"min-height","204px"],[1,"modal-footer"],["type","button",1,"btn","btn-light","btn-elevate","mr-2",3,"click"],["class","card-label",4,"ngIf"],[1,"card-label"],["action","#",1,"form","form-label-right",3,"formGroup"],[1,"form-group","row"],[1,"col-lg-12"],[1,"form-label"],["type","url","pattern","https?://.+","formControlName","url",1,"form-control","form-control-lg","form-control-solid"],["type","button",1,"btn","btn-primary","btn-elevate",3,"disabled","click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Fc(2,m,3,2,"ng-container",2),s.Tb(),s.Ub(3,"div",3),s.Fc(4,f,7,1,"ng-container",2),s.Tb(),s.Ub(5,"div",4),s.Ub(6,"button",5),s.ec("click",function(){return e.modal.dismiss()}),s.Hc(7,"Cancelar"),s.Tb(),s.Fc(8,p,3,1,"ng-container",2),s.Tb(),s.Tb()),2&t&&(s.Cb(2),s.oc("ngIf",e.convenio),s.Cb(2),s.oc("ngIf",e.convenio),s.Cb(4),s.oc("ngIf",e.convenio))},directives:[l.m,r.s,r.k,r.f,r.c,r.n,r.j,r.e],styles:[""]}),t})();var h=n("jT/F"),v=n("5eHb"),T=n("e8Ap");function U(t,e){if(1&t&&(s.Sb(0),s.Pb(1,"span",4),s.Rb()),2&t){const t=s.ic(2);s.Cb(1),s.oc("inlineSVG",t.svg)}}function y(t,e){if(1&t&&(s.Sb(0),s.Pb(1,"i",5),s.Rb()),2&t){const t=s.ic(2);s.Cb(1),s.oc("ngClass",t.icon)}}function C(t,e){if(1&t&&(s.Sb(0),s.Ub(1,"div",3),s.Fc(2,U,2,1,"ng-container",1),s.Fc(3,y,2,1,"ng-container",1),s.Tb(),s.Rb()),2&t){const t=s.ic();s.Cb(2),s.oc("ngIf",t.svg),s.Cb(1),s.oc("ngIf",t.icon)}}const I=["*"];let k=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-notice"]],inputs:{classes:"classes",icon:"icon",svg:"svg"},ngContentSelectors:I,decls:4,vars:2,consts:[["role","alert",1,"alert","alert-custom","alert-white","alert-shadow","gutter-b",3,"ngClass"],[4,"ngIf"],[1,"alert-text"],[1,"alert-icon","alert-icon-top"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[3,"ngClass"]],template:function(t,e){1&t&&(s.nc(),s.Ub(0,"div",0),s.Fc(1,C,4,2,"ng-container",1),s.Ub(2,"div",2),s.mc(3),s.Tb(),s.Tb()),2&t&&(s.oc("ngClass",e.classes),s.Cb(1),s.oc("ngIf",e.icon||e.svg))},directives:[l.k,l.m,T.a],encapsulation:2}),t})();var w=n("bSwM");function S(t,e){if(1&t&&(s.Ub(0,"button",32),s.Pb(1,"i",33),s.Hc(2," Guardar "),s.Tb()),2&t){const t=s.ic();s.oc("disabled",t.form.invalid)}}function E(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",8),s.Ub(1,"div",28),s.Ub(2,"div",10),s.Ub(3,"input",34,35),s.ec("change",function(e){return s.xc(t),s.ic().onUpload(e)}),s.Tb(),s.Tb(),s.Tb(),s.Ub(5,"div",36),s.Ub(6,"div",37),s.Pb(7,"img",38),s.Ub(8,"a",39),s.ec("click",function(){s.xc(t);const e=s.wc(4);return s.ic().reset(e)}),s.Pb(9,"i",40),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.ic();s.Cb(6),s.oc("className",t.mostrarImagen?"mostrarImagenArea":"ocultarImagenArea"),s.Cb(1),s.oc("src",t.imagePath,s.zc)}}function G(t,e){if(1&t&&(s.Ub(0,"div",8),s.Ub(1,"div",36),s.Ub(2,"div",37),s.Pb(3,"img",41),s.Tb(),s.Tb(),s.Tb()),2&t){const t=s.ic();s.Cb(2),s.oc("className",t.mostrarImagen?"mostrarImagenArea":"ocultarImagenArea"),s.Cb(1),s.oc("src",t.imagePath,s.zc)}}function x(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",17),s.ec("click",function(){return s.xc(t),s.ic().crearEnlace()}),s.Pb(1,"i",42),s.Hc(2," A\xf1adir"),s.Tb()}}function P(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",45),s.Ub(1,"a",46),s.ec("click",function(){s.xc(t);const e=s.ic().$implicit;return s.ic().editarEnlace(e)}),s.Pb(2,"span",47),s.Tb(),s.Ub(3,"a",48),s.ec("click",function(){s.xc(t);const e=s.ic().$implicit;return s.ic().eliminarEnlace(e)}),s.Pb(4,"span",49),s.Tb(),s.Tb()}2&t&&(s.Cb(2),s.oc("inlineSVG","./assets/media/svg/icons/Communication/Write.svg"),s.Cb(2),s.oc("inlineSVG","./assets/media/svg/icons/General/Trash.svg"))}function F(t,e){if(1&t&&(s.Ub(0,"tr"),s.Ub(1,"td"),s.Ub(2,"a",43),s.Hc(3),s.Tb(),s.Tb(),s.Ub(4,"td"),s.Fc(5,P,5,2,"div",44),s.Tb(),s.Tb()),2&t){const t=e.$implicit,n=s.ic();s.Cb(2),s.pc("href",t,s.zc),s.Cb(1),s.Ic(t),s.Cb(2),s.oc("ngIf",n.mostrarBotonesGeneral)}}let H=(()=>{class t{constructor(t,e,n,i,o,a,c){this.formBuilder=t,this.activatedRouter=e,this.router=n,this.uploadService=i,this.ref=o,this.toastr=a,this.modalService=c,this.disabledCampos=!0,this.mostrarBotonesGeneral=!0,this.mostrarBotonEdit=!0,this.mostrarBotonDelete=!1,this.currentDate=new Date,this.base64textString="",this.imagePath="",this.mostrarImagen=!1}ngOnInit(){if(this.idConvenio=this.activatedRouter.snapshot.paramMap.get("id"),this.isAddMode=!this.idConvenio,this.isAddMode?(this.disabledCampos=!1,this.mostrarBotonEdit=!1):this.mostrarBotonesGeneral=!1,this.form=this.formBuilder.group({id:0,titulo:[{value:"",disabled:this.disabledCampos},[r.q.required]],fechaAlta:[{value:"",disabled:this.disabledCampos},[r.q.required]],mostrar:[{value:null,disabled:this.disabledCampos}],file:[null],imagenServidor:[null]}),this.isAddMode){const t={year:this.currentDate.getFullYear(),month:this.currentDate.getMonth()+1,day:this.currentDate.getDate()};this.form.patchValue({fechaAlta:t})}}ngOnDestroy(){this.suscription&&this.suscription.unsubscribe()}guardarConvenio(){console.log(this.listEnlaces)}reset(t){this.mostrarImagen=!1,this.form.patchValue({file:null}),t.value=""}onUpload(t){this.form.patchValue({file:t.target.files[0]}),this.form.get("file").updateValueAndValidity(),this.uploadService.uploadImagen(this.form.value.file).subscribe(t=>{switch(t.type){case c.e.Sent:console.log("Request has been made!");break;case c.e.ResponseHeader:console.log("Response header has been received!");break;case c.e.UploadProgress:break;case c.e.Response:var e=new FileReader;e.onload=this._handleReaderLoaded.bind(this),e.readAsBinaryString(this.form.value.file),this.form.patchValue({imagenServidor:t.body.fileName}),this.form.get("imagenServidor").updateValueAndValidity()}})}_handleReaderLoaded(t){this.base64textString=btoa(t.target.result),this.imagePath="data:image/png;base64,"+this.base64textString,this.mostrarImagen=!0,this.ref.detectChanges()}crearEnlace(){this.editarEnlace(void 0)}editarEnlace(t){const e=this.modalService.open(g,{size:"lg"});e.componentInstance.convenio=null!=t?{id:void 0,url:t,titulo:"",fechaAlta:null}:{id:void 0,url:void 0,titulo:"",fechaAlta:null},e.result.then(t=>{t&&(this.listEnlaces=[],this.listEnlaces.push(t),this.ref.detectChanges())}).catch(t=>{console.log(t)})}eliminarEnlace(t){this.modalService.open(b,{size:"lg"}).result.then(t=>{this.listEnlaces=[],this.ref.detectChanges()}).catch(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(r.d),s.Ob(i.a),s.Ob(i.h),s.Ob(h.a),s.Ob(s.h),s.Ob(v.b),s.Ob(o.i))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-nuevo"]],decls:62,vars:6,consts:[["id","kt_form",1,"form",3,"formGroup","ngSubmit"],[1,"text-right"],["class","btn btn-success ","type","submit","name","btn-guardar",3,"disabled",4,"ngIf"],[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title","mb-0","text-right"],[1,"card-body"],["data-wizard-type","step-content","data-wizard-state","current",1,"pb-5"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["type","text","formControlName","titulo","placeholder","T\xedtulo de la actividad",1,"form-control"],[1,"col-md-3"],[1,"input-group"],["placeholder","dd-mm-yyyy","name","dp","ngbDatepicker","","formControlName","fechaAlta",1,"form-control"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-calendar"],[1,"form-group","mt-0","mt-md-10"],["formControlName","mostrar",1,"example-margin"],[1,"col-12","col-md-5"],["class","row",4,"ngIf"],[1,"col-12","col-md-7"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-12"],[1,"table-responsive","angular-bootstrap-table"],[1,"table","table-head-custom","table-vertical-center","overflow-hidden"],[4,"ngFor","ngForOf"],["type","submit","name","btn-guardar",1,"btn","btn-success",3,"disabled"],[1,"fa","fa-check"],["type","file","accept","image/*",3,"change"],["fileInput",""],[1,"col-12","text-center"],[3,"className"],["id","imagen-subida",1,"img-responsive","img-container",2,"max-width","100%",3,"src"],[1,"btn","btn-danger","btn-eliminar-img",3,"click"],[1,"fa","fa-trash"],["id","imagen-subida",1,"img-responsive",2,"max-width","100%",3,"src"],[1,"fa","fa-plus"],["target","_blank",3,"href"],["class","text-center accion",4,"ngIf"],[1,"text-center","accion"],["title","Edit enlace",1,"btn","btn-icon","btn-light","btn-hover-primary","btn-sm","mx-3",3,"click"],["cacheSVG","true",1,"svg-icon","svg-icon-md","svg-icon-primary",3,"inlineSVG"],["title","Eliminar enlace",1,"btn","btn-icon","btn-light","btn-hover-danger","btn-sm",3,"click"],["cacheSVG","true",1,"svg-icon","svg-icon-md","svg-icon-danger",3,"inlineSVG"]],template:function(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",0),s.ec("ngSubmit",function(){return e.guardarConvenio()}),s.Ub(1,"app-notice",1),s.Fc(2,S,3,1,"button",2),s.Tb(),s.Ub(3,"div",3),s.Ub(4,"div",4),s.Ub(5,"div",5),s.Ub(6,"p"),s.Hc(7,"Informaci\xf3n de la actividad"),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"div",6),s.Ub(9,"div",7),s.Ub(10,"div",8),s.Ub(11,"div",9),s.Ub(12,"div",10),s.Ub(13,"label"),s.Hc(14,"T\xedtulo"),s.Tb(),s.Pb(15,"input",11),s.Tb(),s.Tb(),s.Ub(16,"div",12),s.Ub(17,"div",10),s.Ub(18,"label"),s.Hc(19,"Fecha Alta"),s.Tb(),s.Ub(20,"div",13),s.Pb(21,"input",14,15),s.Ub(23,"div",16),s.Ub(24,"button",17),s.ec("click",function(){return s.xc(t),s.wc(22).toggle()}),s.Pb(25,"i",18),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(26,"div",12),s.Ub(27,"div",19),s.Ub(28,"mat-checkbox",20),s.Hc(29,"Mostrar en la web"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(30,"div",8),s.Ub(31,"div",21),s.Ub(32,"div",3),s.Ub(33,"div",4),s.Ub(34,"div",5),s.Ub(35,"p"),s.Hc(36,"Imagen"),s.Tb(),s.Tb(),s.Tb(),s.Ub(37,"div",6),s.Ub(38,"div",7),s.Fc(39,E,10,2,"div",22),s.Fc(40,G,4,2,"div",22),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(41,"div",23),s.Ub(42,"div",3),s.Ub(43,"div",4),s.Ub(44,"div",24),s.Ub(45,"h3",25),s.Hc(46,"Enlace"),s.Tb(),s.Tb(),s.Ub(47,"div",26),s.Fc(48,x,3,0,"button",27),s.Tb(),s.Tb(),s.Ub(49,"div",6),s.Ub(50,"div",7),s.Ub(51,"div",8),s.Ub(52,"div",28),s.Ub(53,"div",29),s.Ub(54,"table",30),s.Ub(55,"thead"),s.Ub(56,"tr"),s.Ub(57,"th"),s.Hc(58,"Ruta"),s.Tb(),s.Pb(59,"th"),s.Tb(),s.Tb(),s.Ub(60,"tbody"),s.Fc(61,F,6,3,"tr",31),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}2&t&&(s.oc("formGroup",e.form),s.Cb(2),s.oc("ngIf",e.mostrarBotonesGeneral),s.Cb(37),s.oc("ngIf",e.mostrarBotonesGeneral),s.Cb(1),s.oc("ngIf",!e.mostrarBotonesGeneral),s.Cb(8),s.oc("ngIf",e.mostrarBotonesGeneral),s.Cb(13),s.oc("ngForOf",e.listEnlaces))},directives:[r.s,r.k,r.f,k,l.m,r.c,r.j,r.e,o.h,w.a,l.l,T.a],styles:[".ocultarImagenArea[_ngcontent-%COMP%]{display:none}.mostrarImagenArea[_ngcontent-%COMP%]{display:block;margin:10px;height:auto;overflow:auto}.btn-eliminar-img[_ngcontent-%COMP%]{position:absolute;left:89%;bottom:-2%;transform:translate(-50%,-50%)}.accion[_ngcontent-%COMP%]{justify-content:space-between}"]}),t})(),O=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-listado"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Ub(0,"p"),s.Hc(1,"listado works!"),s.Tb())},styles:[""]}),t})();var V=n("OtPg"),A=n("Kdsb"),R=n("53Di");let B=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[l.c,R.a,V.b,A.b,o.k,o.n,T.b]]}),t})();var M=n("BJ2y");let D=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},providers:[{provide:o.c,useClass:a.a}],imports:[[i.l.forChild([{path:"nuevo",component:H},{path:"gestion/:id",component:H},{path:"listado",component:O}]),l.c,o.j,w.b,B,T.b,M.a,r.g,r.o]]}),t})()}}]);