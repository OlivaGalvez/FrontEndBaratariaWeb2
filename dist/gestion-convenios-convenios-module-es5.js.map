{"version":3,"sources":["webpack:///src/app/gestion/convenios/listado/listado.component.ts","webpack:///src/app/gestion/convenios/listado/listado.component.html","webpack:///src/app/gestion/convenios/nuevo/enlace-modal/enlace-modal.component.ts","webpack:///src/app/gestion/convenios/nuevo/enlace-modal/enlace-modal.component.html","webpack:///src/app/gestion/convenios/nuevo/nuevo.component.ts","webpack:///src/app/gestion/convenios/nuevo/nuevo.component.html","webpack:///src/app/gestion/convenios/nuevo/eliminar-convenio/eliminar-convenio.component.ts","webpack:///src/app/gestion/convenios/nuevo/eliminar-convenio/eliminar-convenio.component.html","webpack:///src/app/gestion/convenios/nuevo/eliminar-documentacion-modal/eliminar-documentacion-modal.component.ts","webpack:///src/app/gestion/convenios/nuevo/eliminar-documentacion-modal/eliminar-documentacion-modal.component.html","webpack:///src/app/gestion/convenios/convenios.module.ts","webpack:///src/app/gestion/convenios/nuevo/documentacion-modal/documentacion-modal.component.ts","webpack:///src/app/gestion/convenios/nuevo/documentacion-modal/documentacion-modal.component.html","webpack:///src/app/gestion/convenios/nuevo/eliminar-enlace-modal/eliminar-enlace-modal.component.ts","webpack:///src/app/gestion/convenios/nuevo/eliminar-enlace-modal/eliminar-enlace-modal.component.html"],"names":["ListadoComponent","fb","router","ref","conveniosService","subscriptions","filterForm","fetch","paginator","sorting","sb","isLoading$","subscribe","res","isLoading","push","id","navigate","forEach","unsubscribe","date","Date","add","format","filterGroup","group","status","type","searchTerm","controls","valueChanges","filter","get","value","patchState","column","isActiveColumn","direction","sort","paginate","selector","templateUrl","styleUrls","EnlaceModalComponent","modal","passEntry","loadForm","formGroup","nombre","enlace","required","url","formData","Math","floor","random","emit","close","reset","NuevoComponent","formBuilder","activatedRouter","uploadService","toastr","modalService","disabledCampos","mostrarBotonesGeneral","mostrarAniadirEnlace","mostrarBotonEdit","mostrarBotonDelete","currentDate","base64textString","imagePath","mostrarImagen","listEnlaces","listDocumentacion","idConvenio","snapshot","paramMap","isAddMode","form","titulo","disabled","fechaAlta","mostrar","texto","file","imagenServidor","fechaAltaAux","year","getFullYear","month","getMonth","day","getDate","patchValue","getById","pipe","data","mostrarDatosAlEditar","result","convenio","imagenServidorBase64","listDocumentos","length","enable","suscription","validar","error","aniadirConvenio","success","modificarConvenio","myInputVariable","nativeElement","disable","ngOnInit","detectChanges","modalRef","open","size","then","eliminarConvenio","e","console","log","editarDocumento","undefined","result2","find","x","documento","componentInstance","index","findIndex","d","splice","subirDocAlta","uploadDocumento","event","Sent","ResponseHeader","UploadProgress","Response","body","servidor","fileName","original","name","download","newBlob","Blob","window","URL","createObjectURL","link","document","createElement","href","dispatchEvent","MouseEvent","bubbles","cancelable","view","setTimeout","revokeObjectURL","remove","target","files","updateValueAndValidity","uploadImagen","reader","FileReader","onload","_handleReaderLoaded","bind","readAsBinaryString","readerEvt","binaryString","btoa","element","editarEnlace","guardarConvenio","EliminarConvenioComponent","EliminarDocumentacionModalComponent","eliminarDocumento","ConveniosModule","provide","useClass","forChild","path","component","declarations","imports","providers","entryComponents","DocumentacionModalComponent","tamanio","niceBytes","units","l","n","parseInt","toFixed","EliminarEnlaceModalComponent","eliminarEnlace"],"mappings":"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","file":"gestion-convenios-convenios-module-es5.js","sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs';\r\nimport { Convenio } from 'src/app/models/Convenio';\r\nimport { ConveniosService } from 'src/app/services/convenio.service';\r\nimport { PaginatorState, SortState } from 'src/app/_metronic_gestion/shared/crud-table';\r\n\r\n@Component({\r\n  selector: 'app-listado',\r\n  templateUrl: './listado.component.html',\r\n  styleUrls: ['./listado.component.scss']\r\n})\r\nexport class ListadoComponent implements OnInit, OnDestroy {\r\n\r\n  isLoading: boolean;\r\n  paginator: PaginatorState;\r\n  sorting: SortState;\r\n  filterGroup: FormGroup;\r\n\r\n  list: Convenio [];\r\n\r\n  private subscriptions: Subscription[] = [];\r\n  constructor(private fb: FormBuilder, private router: Router, private ref: ChangeDetectorRef, \r\n    public conveniosService: ConveniosService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.filterForm();\r\n    this.conveniosService.fetch();\r\n    this.paginator = this.conveniosService.paginator;\r\n    this.sorting = this.conveniosService.sorting;\r\n    const sb = this.conveniosService.isLoading$.subscribe(res => this.isLoading = res);\r\n    this.subscriptions.push(sb);\r\n  }\r\n\r\n  editarConvenio (id: number){\r\n    this.router.navigate(['/admin/convenio/gestion/' + id]);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n  }\r\n\r\n  convertDate (date)\r\n  {\r\n    if (date != null) return new Date(moment(date).add(-1, 'M').format(\"YYYY-MM-DD HH:mm:ss\"));\r\n    return null;\r\n  }\r\n\r\n  // filtration\r\n  filterForm() {\r\n    this.filterGroup = this.fb.group({\r\n      status: [''],\r\n      type: [''],\r\n      searchTerm: [''],\r\n    });\r\n    this.subscriptions.push(\r\n      this.filterGroup.controls.status.valueChanges.subscribe(() =>\r\n        this.filter()\r\n      )\r\n    );\r\n    this.subscriptions.push(\r\n      this.filterGroup.controls.type.valueChanges.subscribe(() => this.filter())\r\n    );\r\n  }\r\n\r\n  filter() {\r\n    const filter = {};\r\n    const status = this.filterGroup.get('status').value;\r\n    if (status) {\r\n      filter['mostrar'] = status;\r\n    }\r\n\r\n    const type = this.filterGroup.get('type').value;\r\n    if (type) {\r\n      filter['type'] = type;\r\n    }\r\n    this.conveniosService.patchState({ filter });\r\n  }\r\n\r\n  // sorting\r\n  sort(column: string) {\r\n    const sorting = this.sorting;\r\n    const isActiveColumn = sorting.column === column;\r\n    if (!isActiveColumn) {\r\n      sorting.column = column;\r\n      sorting.direction = 'asc';\r\n    } else {\r\n      sorting.direction = sorting.direction === 'asc' ? 'desc' : 'asc';\r\n    }\r\n    this.conveniosService.patchState({ sorting });\r\n  }\r\n\r\n\r\n  // pagination\r\n  paginate(paginator: PaginatorState) {\r\n    this.conveniosService.patchState({ paginator });\r\n  }\r\n}\r\n","<div class=\"row\">\r\n\r\n    <!-- <div class=\"col-12\">\r\n      <div class=\"card card-custom gutter-b\">\r\n        <div class=\"card-header\">\r\n          <div class=\"card-title\">\r\n            <h3 class=\"card-label\">Filtrar información</h3>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"form form-label-right\">\r\n            <div class=\"form-group row\">\r\n              <div class=\"col-lg-4\">\r\n                <div class=\"row\" [formGroup]=\"filterGroup\">\r\n                  <div class=\"col-lg-6\">\r\n                    <select class=\"form-control\" name=\"status\" placeholder=\"Filter by Status\" formControlName=\"status\">\r\n                      <option value=true>Si</option>\r\n                      <option value=false>No</option>\r\n                    </select><small class=\"form-text text-muted\"><b>Filter</b> by Mostrar</small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n\r\n    <div class=\"col-12\">\r\n      <div class=\"card card-custom gutter-b\">\r\n        <div class=\"card-header\">\r\n          <div class=\"card-title\">\r\n            <h3 class=\"card-label\">Listado de convenios</h3>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"pb-5\" data-wizard-type=\"step-content\" data-wizard-state=\"current\">\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <div class=\"table-responsive angular-bootstrap-table\">\r\n\r\n                  <table class=\"table table-head-custom table-vertical-center overflow-hidden\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>\r\n                          Id\r\n                          <app-sort-icon column=\"id\" [activeColumn]=\"sorting.column\" [activeDirection]=\"sorting.direction\"\r\n                            (sort)=\"sort($event)\"></app-sort-icon>\r\n                        </th>\r\n                        <th>\r\n                          Fecha Alta\r\n                          <app-sort-icon column=\"fechaAlta\" [activeColumn]=\"sorting.column\" [activeDirection]=\"sorting.direction\"\r\n                          (sort)=\"sort($event)\"></app-sort-icon>\r\n                        </th>\r\n                        <th>\r\n                          Título\r\n                          <app-sort-icon column=\"titulo\" [activeColumn]=\"sorting.column\" [activeDirection]=\"sorting.direction\"\r\n                          (sort)=\"sort($event)\"></app-sort-icon>\r\n                        </th>\r\n                        <th>\r\n                          Mostrar\r\n                          <app-sort-icon column=\"mostrar\" [activeColumn]=\"sorting.column\" [activeDirection]=\"sorting.direction\"\r\n                          (sort)=\"sort($event)\"></app-sort-icon>\r\n                        </th>\r\n                        <th> </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr *ngFor=\"let item of conveniosService.items$ | async\">\r\n                        <td>{{ item.id }}</td>\r\n                        <td>{{ convertDate(item.fechaAlta) | date: 'dd/MM/yyyy'}}</td>\r\n                        <td>{{ item.titulo }}</td>\r\n                        <td>{{ item.mostrar ? 'Si' : 'No' }}</td>\r\n                        <td class=\"text-center accion\">\r\n\r\n                            <a title=\"Edit enlace\" class=\"btn btn-icon btn-light btn-hover-primary btn-sm mx-3\"\r\n                            (click)=\"editarConvenio(item.id)\">\r\n                              <span [inlineSVG]=\"'./assets/media/svg/icons/Communication/Write.svg'\" cacheSVG=\"true\"\r\n                                class=\"svg-icon svg-icon-md svg-icon-primary\">\r\n                              </span>\r\n                            </a>\r\n                          </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <app-paginator class=\"d-flex justify-content-between align-items-center flex-wrap\" [paginator]=\"paginator\"\r\n                  (paginate)=\"paginate($event)\"></app-paginator>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { DireccionWeb } from 'src/app/models/DireccionWeb';\r\n\r\n@Component({\r\n  selector: 'app-enlace-modal',\r\n  templateUrl: './enlace-modal.component.html',\r\n  styleUrls: ['./enlace-modal.component.scss']\r\n})\r\nexport class EnlaceModalComponent implements OnInit {\r\n\r\n  @Input() enlace: DireccionWeb;\r\n  @Output() passEntry: EventEmitter<any> = new EventEmitter();\r\n  \r\n  formGroup: FormGroup;\r\n\r\n  constructor(private fb: FormBuilder, public modal: NgbActiveModal) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadForm();\r\n  }\r\n\r\n  loadForm() {\r\n    this.formGroup = this.fb.group({\r\n      nombre: [this.enlace.nombre, [Validators.required]],\r\n      url: [this.enlace.url, [Validators.required]],\r\n    });\r\n  }\r\n\r\n  guardar ()\r\n  {\r\n    const formData = this.formGroup.value;\r\n    if (!this.enlace.id)\r\n    {\r\n      this.enlace.id = Math.floor((Math.random()*6)+1);\r\n    }\r\n    this.enlace.nombre = formData.nombre;\r\n    this.enlace.url = formData.url;\r\n\r\n    this.passEntry.emit(this.enlace);\r\n    this.modal.close(this.enlace);\r\n    this.formGroup.reset();\r\n  }\r\n}\r\n\r\n","<div class=\"modal-content\">\r\n    <div class=\"modal-header\">\r\n        <ng-container *ngIf=\"enlace\">\r\n            <h3 class=\"card-label\" *ngIf=\"enlace.id\">Editar enlace</h3>\r\n            <h3 class=\"card-label\" *ngIf=\"!enlace.id\">Nuevo enlace</h3>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"overlay overlay-block cursor-default modal-body\" style=\"min-height: 204px\">\r\n        <ng-container *ngIf=\"enlace\">\r\n            <form action=\"#\" class=\"form form-label-right\" [formGroup]=\"formGroup\">\r\n                <div class=\"form-group row\">\r\n                    <div class=\"col-lg-12\">\r\n                        <label class=\"form-label\">Título</label>\r\n                        <input type=\"text\" class=\"form-control form-control-lg form-control-solid\"\r\n                          formControlName=\"nombre\" />\r\n                    </div>\r\n                    <div class=\"col-lg-12\">\r\n                      <label class=\"form-label\">Ruta del enlace</label>\r\n                      <input type=\"url\" class=\"form-control form-control-lg form-control-solid\"  pattern=\"https?://.+\"\r\n                        formControlName=\"url\" />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </ng-container> \r\n    </div>\r\n    <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-light btn-elevate mr-2\" (click)=\"modal.dismiss()\">Cancelar</button>\r\n        <ng-container *ngIf=\"enlace\">\r\n            <button type=\"button\" class=\"btn btn-primary btn-elevate\" (click)=\"guardar()\" \r\n                [disabled]=\"formGroup.invalid\" >Guardar </button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n","import { HttpEvent, HttpEventType } from '@angular/common/http';\r\nimport { ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport * as moment from 'moment';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Subscription } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { Convenio } from 'src/app/models/Convenio';\r\nimport { DireccionWeb } from 'src/app/models/DireccionWeb';\r\nimport { Documento } from 'src/app/models/Documento';\r\nimport { ConveniosService } from 'src/app/services/convenio.service';\r\nimport { UploadService } from 'src/app/services/upload.service';\r\nimport { DocumentacionModalComponent } from './documentacion-modal/documentacion-modal.component';\r\nimport { EliminarConvenioComponent } from './eliminar-convenio/eliminar-convenio.component';\r\nimport { EliminarDocumentacionModalComponent } from './eliminar-documentacion-modal/eliminar-documentacion-modal.component';\r\nimport { EliminarEnlaceModalComponent } from './eliminar-enlace-modal/eliminar-enlace-modal.component';\r\nimport { EnlaceModalComponent } from './enlace-modal/enlace-modal.component';\r\n\r\n@Component({\r\n  selector: 'app-nuevo',\r\n  templateUrl: './nuevo.component.html',\r\n  styleUrls: ['./nuevo.component.scss']\r\n})\r\nexport class NuevoComponent implements OnInit, OnDestroy {\r\n  form: FormGroup;\r\n  suscription: Subscription;\r\n  convenio: Convenio;\r\n  idConvenio: string;\r\n\r\n  isAddMode: boolean;\r\n  disabledCampos: boolean = true;\r\n  mostrarBotonesGeneral: boolean = true;\r\n  mostrarAniadirEnlace : boolean = true;\r\n  mostrarBotonEdit: boolean = true;\r\n  mostrarBotonDelete: boolean = false;\r\n\r\n  currentDate = new Date();\r\n  base64textString:String=\"\";\r\n  imagePath:String=\"\";\r\n  mostrarImagen: boolean = false;\r\n\r\n  @ViewChild('fileInput')\r\n  myInputVariable: ElementRef;\r\n\r\n  listEnlaces: DireccionWeb [] = [];\r\n  listDocumentacion: Documento [] = [];\r\n\r\n  constructor(private formBuilder: FormBuilder,  private activatedRouter: ActivatedRoute, private router: Router,\r\n    private uploadService: UploadService, private ref: ChangeDetectorRef, private toastr: ToastrService,\r\n    private modalService: NgbModal, private conveniosService: ConveniosService) \r\n  { \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.idConvenio = this.activatedRouter.snapshot.paramMap.get('id');\r\n\r\n    this.isAddMode = !this.idConvenio;\r\n    if (this.isAddMode) {\r\n      this.disabledCampos = false; this.mostrarBotonEdit = false; \r\n    }\r\n    else {\r\n      this.mostrarBotonesGeneral = false;\r\n      this.mostrarAniadirEnlace = false;\r\n    }\r\n\r\n    this.form = this.formBuilder.group({\r\n      id: 0,\r\n      titulo: [{\r\n          value: '',\r\n          disabled: this.disabledCampos,\r\n      },  [Validators.required]],\r\n      fechaAlta: [{\r\n        value: null,\r\n        disabled: true,\r\n      },  [Validators.required]],\r\n      mostrar: [{\r\n          value: null,\r\n          disabled: this.disabledCampos,\r\n      }],\r\n      texto: [{\r\n        value: '',\r\n        disabled: this.disabledCampos,\r\n      },  [Validators.required]],\r\n      file: [null],\r\n      imagenServidor: [null]\r\n    })\r\n\r\n    if (this.isAddMode)\r\n    {\r\n      const fechaAltaAux = { year: this.currentDate.getFullYear(), month: this.currentDate.getMonth()+ 1, \r\n        day: this.currentDate.getDate() };\r\n      this.form.patchValue({\r\n          fechaAlta: fechaAltaAux\r\n      });\r\n    }\r\n    else\r\n    {\r\n       this.conveniosService.getById(this.idConvenio).pipe(\r\n        tap(data =>  this.mostrarDatosAlEditar(data)),\r\n      ).subscribe(result => \r\n        this.form.patchValue({\r\n          titulo: result.titulo,\r\n          mostrar: result.mostrar,\r\n          texto: result.texto,\r\n          fechaAlta:  {year: new Date(moment(result.fechaAlta).format(\"YYYY-MM-DD HH:mm:ss\")).getFullYear(),\r\n            month: new Date(moment(result.fechaAlta).format(\"YYYY-MM-DD HH:mm:ss\")).getMonth(), \r\n            day: new Date(moment(result.fechaAlta).format(\"YYYY-MM-DD HH:mm:ss\")).getDate()},\r\n        })\r\n      ); \r\n    }\r\n\r\n  }\r\n\r\n  mostrarDatosAlEditar (data) {\r\n    this.convenio = data;\r\n    this.mostrarImagen = true;\r\n    this.imagePath = this.convenio.imagenServidorBase64;\r\n    this.listEnlaces = this.convenio.listEnlaces;\r\n    this.listDocumentacion = this.convenio.listDocumentos;\r\n  }\r\n\r\n  editarForm ()\r\n  {\r\n    this.mostrarBotonesGeneral = true;\r\n    if (this.listEnlaces.length == 0)\r\n    {\r\n      this.mostrarAniadirEnlace = true;\r\n    }\r\n    this.mostrarBotonEdit = false;\r\n    this.mostrarBotonDelete = true;\r\n    this.form.get('titulo').enable();\r\n    this.form.get('mostrar').enable();\r\n    this.form.get('texto').enable();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.suscription) {\r\n      this.suscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  guardarConvenio ()\r\n  {\r\n    let validar = true;\r\n    const convenio: Convenio = {\r\n      id: this.convenio != null ? this.convenio.id : 0,\r\n      titulo: this.form.get('titulo')?.value,\r\n      fechaAlta: moment.utc(this.form.get('fechaAlta')?.value),\r\n      mostrar: this.form.get('mostrar') != null ? this.form.get('mostrar').value : false,\r\n      texto: this.form.get('texto')?.value,\r\n      file: this.form.get('file')?.value,\r\n      imagenServidor: this.form.get('imagenServidor').value,\r\n      listEnlaces: this.listEnlaces,\r\n      listDocumentos: this.listDocumentacion\r\n    };\r\n\r\n    if (this.isAddMode && convenio.file == null)\r\n    {\r\n      this.toastr.error('Inserte una imagen', 'Error');\r\n      validar = false;\r\n    }\r\n\r\n    if (validar)\r\n    {\r\n      //Nuevo convenio\r\n      if (this.isAddMode)\r\n      {\r\n         this.conveniosService.aniadirConvenio(convenio).subscribe(data => {\r\n          this.toastr.success('Convenio guardado', 'Convenio');\r\n          this.router.navigate(['/admin/convenio/gestion/' + data.id]);\r\n        });  \r\n      }\r\n      //Editar convenio\r\n      else {\r\n         this.conveniosService.modificarConvenio(convenio).subscribe(data => {\r\n          this.toastr.success('Convenio guardado', 'Convenio');\r\n          this.myInputVariable.nativeElement.value = \"\";\r\n          this.mostrarImagen = false;\r\n  \r\n          this.listEnlaces = null;\r\n          this.listDocumentacion = null;\r\n\r\n          this.mostrarBotonEdit = true;\r\n          this.mostrarBotonDelete = false;\r\n\r\n          this.form.get('titulo').disable();\r\n          this.form.get('mostrar').disable();\r\n          this.form.get('texto').disable();\r\n  \r\n          \r\n          this.form.reset();\r\n          this.ngOnInit();\r\n          this.ref.detectChanges();\r\n        });  \r\n      }\r\n     \r\n    }\r\n  }\r\n\r\n  eliminarForm () \r\n  {\r\n     const modalRef = this.modalService.open(EliminarConvenioComponent, { size: 'lg' });\r\n    modalRef.result.then((result) => {\r\n      this.conveniosService.eliminarConvenio(this.convenio.id).subscribe((data)=>{\r\n        this.router.navigate(['/admin/convenio/listado/']);\r\n        this.toastr.error('Convenio borrado', 'Convenio');\r\n      });\r\n      \r\n    }).catch(e => {\r\n      console.log(e);\r\n    }); \r\n  }\r\n\r\n  crearDocumentacion() {\r\n    this.editarDocumento(undefined);\r\n  }\r\n\r\n  editarDocumento(id: number) {\r\n    const modalRef = this.modalService.open(DocumentacionModalComponent, { size: 'lg' });\r\n    if (id != undefined)\r\n    {\r\n      var result2 = this.listDocumentacion.find(x => x.id === id);\r\n      const documento: Documento = {\r\n        id: result2.id,\r\n        nombre: result2.nombre\r\n      };\r\n\r\n      modalRef.componentInstance.documento = documento;\r\n    }\r\n    else {\r\n      const documento: Documento = {\r\n        id: undefined,\r\n        nombre: ''\r\n      };\r\n      modalRef.componentInstance.documento = documento;\r\n    }\r\n\r\n    modalRef.result.then((result: Documento) => {\r\n      if (result) {\r\n        let index = this.listDocumentacion.findIndex(d => d.id === id);\r\n        if (index > -1) this.listDocumentacion.splice(index, 1);\r\n        this.subirDocAlta(result);\r\n      }\r\n    }).catch(e => {\r\n      console.log(e);\r\n    }); \r\n  }\r\n\r\n  subirDocAlta (result) \r\n  {\r\n    this.uploadService.uploadDocumento(result.file).subscribe((event: HttpEvent<any>) => {\r\n      switch (event.type) {\r\n        case HttpEventType.Sent:\r\n          console.log('Request has been made!');\r\n          break;\r\n        case HttpEventType.ResponseHeader:\r\n          console.log('Response header has been received!');\r\n          break;\r\n        case HttpEventType.UploadProgress:\r\n          break;\r\n        case HttpEventType.Response:\r\n          result.url =  event.body.url;\r\n          result.servidor = event.body.fileName;\r\n          result.original = result.file.name;\r\n          this.listDocumentacion.push(result);\r\n          this.ref.detectChanges();\r\n      }\r\n    })\r\n  }\r\n\r\n  download(url, original): void {\r\n    this.uploadService.download(url).subscribe((x) => {\r\n        var newBlob = new Blob([x], { type: \"application/pdf\" });\r\n        const data = window.URL.createObjectURL(newBlob);\r\n        \r\n        var link = document.createElement('a');\r\n        link.href = data;\r\n        link.download = original;\r\n        link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\r\n        \r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(data);\r\n            link.remove();\r\n        }, 100);\r\n    });\r\n  }\r\n\r\n  eliminarDocumento (id: number) \r\n  {\r\n    const modalRef = this.modalService.open(EliminarDocumentacionModalComponent, { size: 'lg' });\r\n    modalRef.componentInstance.id = id;\r\n    modalRef.result.then((result) => {\r\n      let index = this.listDocumentacion.findIndex(d => d.id === id); //find index in your array\r\n      if (index > -1) this.listDocumentacion.splice(index, 1);//remove element from array\r\n      this.ref.detectChanges();\r\n    }).catch(e => {\r\n      console.log(e);\r\n    });\r\n  }\r\n\r\n  onUpload(event) {\r\n\r\n    const file = (event.target as HTMLInputElement).files[0];\r\n    this.form.patchValue({\r\n      file: file\r\n    });\r\n    this.form.get('file').updateValueAndValidity();\r\n\r\n    this.uploadService.uploadImagen(this.form.value.file).subscribe((event: HttpEvent<any>) => {\r\n      switch (event.type) {\r\n        case HttpEventType.Sent:\r\n          console.log('Request has been made!');\r\n          break;\r\n        case HttpEventType.ResponseHeader:\r\n          console.log('Response header has been received!');\r\n          break;\r\n        case HttpEventType.UploadProgress:\r\n          break;\r\n        case HttpEventType.Response:\r\n          var reader = new FileReader();\r\n          reader.onload =this._handleReaderLoaded.bind(this);\r\n          reader.readAsBinaryString(this.form.value.file);\r\n\r\n          this.form.patchValue({\r\n            imagenServidor: event.body.fileName\r\n          });\r\n          this.form.get('imagenServidor').updateValueAndValidity();\r\n      }\r\n    })\r\n  }\r\n\r\n  _handleReaderLoaded(readerEvt) {\r\n    var binaryString = readerEvt.target.result;\r\n    this.base64textString= btoa(binaryString);\r\n    this.imagePath = \"data:image/png;base64,\" + this.base64textString;\r\n    this.mostrarImagen = true;\r\n    this.ref.detectChanges();\r\n   }\r\n\r\n  reset(element) {\r\n    this.mostrarImagen = false;\r\n    this.form.patchValue({\r\n      file: null\r\n    });\r\n    element.value = \"\";\r\n  }\r\n\r\n  crearEnlace() {\r\n    this.editarEnlace(undefined);\r\n  }\r\n\r\n  editarEnlace(id: number) {\r\n    const modalRef = this.modalService.open(EnlaceModalComponent, { size: 'lg' });\r\n\r\n    if (id != undefined)\r\n    {\r\n      var result2 = this.listEnlaces.find(x => x.id === id);\r\n      const enlace: DireccionWeb = {\r\n        id: result2.id,\r\n        nombre: result2.nombre,\r\n        url: result2.url,\r\n      };\r\n\r\n      modalRef.componentInstance.enlace = enlace;\r\n    }\r\n    else {\r\n      const enlace: DireccionWeb = {\r\n        id: undefined,\r\n        nombre: '',\r\n        url: '',\r\n      };\r\n      modalRef.componentInstance.enlace = enlace;\r\n    }\r\n\r\n    modalRef.result.then((result) => {\r\n      if (result) {\r\n        this.mostrarAniadirEnlace = false;\r\n        let index = this.listEnlaces.findIndex(d => d.id === id);\r\n        if (index > -1) this.listEnlaces.splice(index, 1);\r\n        this.listEnlaces.push(result);\r\n        this.ref.detectChanges();\r\n      }\r\n    }).catch(e => {\r\n      console.log(e);\r\n    });\r\n  }\r\n\r\n  eliminarEnlace (id: number) \r\n  {\r\n    const modalRef = this.modalService.open(EliminarEnlaceModalComponent, { size: 'lg' });\r\n    modalRef.componentInstance.id = id;\r\n    modalRef.result.then((result) => {\r\n      this.mostrarAniadirEnlace = true;\r\n      let index = this.listEnlaces.findIndex(d => d.id === id); //find index in your array\r\n      if (index > -1) this.listEnlaces.splice(index, 1);//remove element from array\r\n      this.ref.detectChanges();\r\n    }).catch(e => {\r\n      console.log(e);\r\n    }); \r\n  }\r\n\r\n\r\n}\r\n","<form [formGroup]=\"form\" (ngSubmit) = \"guardarConvenio()\" class=\"form\" id=\"kt_form\">\r\n    <app-notice class=\"text-right\">\r\n      <button *ngIf=\"mostrarBotonesGeneral\" class=\"btn btn-success \" type=\"submit\" name=\"btn-guardar\" [disabled]=\"form.invalid\">\r\n        <i class=\"fa fa-check\"></i>  Guardar\r\n      </button>\r\n      <a *ngIf=\"mostrarBotonEdit\" class=\"btn btn-info \" name=\"btn-editar\" (click)=\"editarForm()\">\r\n        <i class=\"fa fa-edit\"></i>  Editar\r\n      </a>\r\n      <a *ngIf=\"mostrarBotonDelete\" class=\"btn btn-danger ml-2\" name=\"btn-eliminar\" (click)=\"eliminarForm()\">\r\n        <i class=\"fa fa-trash\"></i>  Eliminar\r\n      </a>\r\n    </app-notice>\r\n  \r\n    <div class=\"card card-custom gutter-b\">\r\n        <div class=\"card-header\">\r\n          <div class=\"card-title mb-0 text-right\">\r\n            <p>Información del convenio</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"pb-5\" data-wizard-type=\"step-content\" data-wizard-state=\"current\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-12\">\r\n                <div class=\"form-group\">\r\n                  <label>Título</label>\r\n                  <input type=\"text\" class=\"form-control\" formControlName=\"titulo\" placeholder=\"Título de la actividad\"/>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Fecha Alta</label>\r\n                  <div class=\"input-group\">\r\n                    <input class=\"form-control\" placeholder=\"dd-mm-yyyy\" name=\"dp\" ngbDatepicker formControlName=\"fechaAlta\" #d=\"ngbDatepicker\">\r\n                    <div class=\"input-group-append\">\r\n                      <button class=\"btn btn-primary\" (click)=\"d.toggle()\" type=\"button\">\r\n                        <i class=\"fa fa-calendar\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-md-3\">\r\n                <div class=\"form-group mt-0 mt-md-10\">\r\n                  <mat-checkbox class=\"example-margin\" formControlName=\"mostrar\">Mostrar en la web</mat-checkbox>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-12\">\r\n                <div class=\"form-group\">\r\n                  <label>Descripción</label>\r\n                  <textarea  rows=\"5\" class=\"form-control\" formControlName=\"texto\" placeholder=\"Descripción del convenio\"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </form>\r\n  \r\n     <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card card-custom gutter-b\">\r\n          <div class=\"card-header\">\r\n            <div class=\"card-title\">\r\n              <h3 class=\"card-label\">Documentación</h3>\r\n            </div>\r\n            <div class=\"card-toolbar\">\r\n              <button *ngIf=\"mostrarBotonesGeneral\" type=\"button\" class=\"btn btn-primary\" (click)=\"crearDocumentacion()\">\r\n                <i class=\"fa fa-plus\"></i> Añadir</button>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"pb-5\" data-wizard-type=\"step-content\" data-wizard-state=\"current\">\r\n              <div class=\"row\">\r\n                <div class=\"col-12\">\r\n                  <div class=\"table-responsive angular-bootstrap-table\">\r\n                    <table class=\"table table-head-custom table-vertical-center overflow-hidden\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Nombre</th>\r\n                          <th>Original</th>\r\n                          <th>Tamaño</th>\r\n                          <th> </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr *ngFor=\"let item of listDocumentacion\">\r\n                          <td>{{ item.nombre }}</td>\r\n                          <td> \r\n                            <div class=\"btn-group btn-group-sm\" role=\"group\">\r\n                              <a (click)=\"download(item.url, item.original)\"  class=\"btn btn-outline-success\" title=\"\" target=\"_blank\" >{{ item.original }}</a>\r\n                              <a (click)=\"download(item.url, item.original)\"  class=\"btn btn-outline-success\" title=\"\"><i class=\"fa fa-download\"></i></a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  </div>\r\n                        </td>\r\n                          <td>{{ item.tamanio }}</td>\r\n                          <td>\r\n                            <div *ngIf=\"mostrarBotonesGeneral\" class=\"text-center accion btn-group\">\r\n                              <a title=\"Editar documento\" class=\"btn btn-icon btn-light btn-hover-primary btn-sm mx-3\"\r\n                              (click)=\"editarDocumento(item.id)\">\r\n                                <span [inlineSVG]=\"'./assets/media/svg/icons/Communication/Write.svg'\" cacheSVG=\"true\"\r\n                                  class=\"svg-icon svg-icon-md svg-icon-primary\">\r\n                                </span>\r\n                              </a>\r\n                \r\n                              <a title=\"Eliminar documento\" class=\"btn btn-icon btn-light btn-hover-danger btn-sm\"\r\n                                (click)=\"eliminarDocumento(item.id)\">\r\n                                <span [inlineSVG]=\"'./assets/media/svg/icons/General/Trash.svg'\" cacheSVG=\"true\"\r\n                                  class=\"svg-icon svg-icon-md svg-icon-danger\">\r\n                                </span>\r\n                              </a>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n     <div class=\"col-12 col-lg-5\">\r\n        <div class=\"card card-custom gutter-b\">\r\n          <div class=\"card-header\">\r\n            <div class=\"card-title mb-0 text-right\">\r\n              <p>Imagen</p>\r\n            </div>\r\n          </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"pb-5\" data-wizard-type=\"step-content\" data-wizard-state=\"current\">\r\n  \r\n                <div *ngIf=\"mostrarBotonesGeneral\" class=\"row\">\r\n                  <div  class=\"col-12\">\r\n                    <div class=\"form-group\">\r\n                      <input #fileInput type=\"file\" accept=\"image/*\" (change)=\"onUpload($event)\">\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-12 text-center\">\r\n                    <div  [className]=\"mostrarImagen ? 'mostrarImagenArea' : 'ocultarImagenArea'\">\r\n                      <img id=\"imagen-subida\" [src]=\"imagePath\" class=\"img-responsive img-container\" style=\"max-width: 100%;\">\r\n                     \r\n                      <a class=\"remove-image\" (click)=\"reset(fileInput)\" style=\"display: inline;\">&#215;</a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n  \r\n                <div *ngIf=\"!mostrarBotonesGeneral\" class=\"row\">\r\n                  <div class=\"col-12 text-center\">\r\n                    <div [className]=\"mostrarImagen ? 'mostrarImagenArea' : 'ocultarImagenArea'\">\r\n                      <img id=\"imagen-subida\" [src]=\"imagePath\" class=\"img-responsive\"  style=\"max-width: 100%;\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n  \r\n       <div class=\"col-12 col-lg-7\">\r\n        <div class=\"card card-custom gutter-b\">\r\n          <div class=\"card-header\">\r\n            <div class=\"card-title\">\r\n              <h3 class=\"card-label\">Enlace <span class=\"small pl-2 font-italic\">Posibilidad de añadir un solo enlace</span></h3>\r\n            </div>\r\n            <div class=\"card-toolbar\">\r\n              <button *ngIf=\"mostrarAniadirEnlace\" type=\"button\" class=\"btn btn-primary\" (click)=\"crearEnlace()\">\r\n                <i class=\"fa fa-plus\"></i> Añadir</button>\r\n            </div>\r\n          </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"pb-5\" data-wizard-type=\"step-content\" data-wizard-state=\"current\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"table-responsive angular-bootstrap-table\">\r\n                      <table class=\"table table-head-custom table-vertical-center overflow-hidden\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Nombre</th>\r\n                            <th>Ruta</th>\r\n                            <th> </th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr *ngFor=\"let item of listEnlaces\">\r\n                            <td>{{ item.nombre }}</td>\r\n                            <td> <a href=\"{{ item.url }}\" target=\"_blank\">{{ item.url }}</a></td>\r\n                            <td>\r\n                              <div *ngIf=\"mostrarBotonesGeneral\" class=\"text-center accion btn-group\">\r\n                                <a title=\"Edit enlace\" class=\"btn btn-icon btn-light btn-hover-primary btn-sm mx-3\"\r\n                                (click)=\"editarEnlace(item.id)\">\r\n                                  <span [inlineSVG]=\"'./assets/media/svg/icons/Communication/Write.svg'\" cacheSVG=\"true\"\r\n                                    class=\"svg-icon svg-icon-md svg-icon-primary\">\r\n                                  </span>\r\n                                </a>\r\n                  \r\n                                <a title=\"Eliminar enlace\" class=\"btn btn-icon btn-light btn-hover-danger btn-sm\"\r\n                                  (click)=\"eliminarEnlace(item.id)\">\r\n                                  <span [inlineSVG]=\"'./assets/media/svg/icons/General/Trash.svg'\" cacheSVG=\"true\"\r\n                                    class=\"svg-icon svg-icon-md svg-icon-danger\">\r\n                                  </span>\r\n                                </a>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div> \r\n  \r\n  \r\n  \r\n  \r\n  \r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-eliminar-convenio',\r\n  templateUrl: './eliminar-convenio.component.html',\r\n  styleUrls: ['./eliminar-convenio.component.scss']\r\n})\r\nexport class EliminarConvenioComponent implements OnInit {\r\n\r\n  constructor(public modal: NgbActiveModal) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  eliminarConvenio ()\r\n  {\r\n    this.modal.close();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n    <div class=\"modal-title h4\">Eliminar convenio</div>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <span>¿Estás seguro de eliminar esta convenio?</span>\r\n  </div>\r\n  \r\n  <div class=\"modal-footer\">\r\n    <div>\r\n      <button type=\"button\" class=\"btn btn-light btn-elevate mr-1\" (click)=\"modal.dismiss()\">Cancelar</button>&nbsp;\r\n      <button type=\"button\" class=\"btn btn-primary btn-elevate\" (click)=\"eliminarConvenio()\">Eliminar</button>\r\n    </div>\r\n  </div>\r\n\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-eliminar-documentacion-modal',\r\n  templateUrl: './eliminar-documentacion-modal.component.html',\r\n  styleUrls: ['./eliminar-documentacion-modal.component.scss']\r\n})\r\nexport class EliminarDocumentacionModalComponent implements OnInit {\r\n\r\n  @Input() id: number;\r\n\r\n  constructor(public modal: NgbActiveModal) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  eliminarDocumento ()\r\n  {\r\n    this.modal.close();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n    <div class=\"modal-title h4\">Eliminar documento</div>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <span>¿Estás seguro de eliminar este documento?</span>\r\n  </div>\r\n  \r\n  <div class=\"modal-footer\">\r\n    <div>\r\n      <button type=\"button\" class=\"btn btn-light btn-elevate mr-1\" (click)=\"modal.dismiss()\">Cancelar</button>&nbsp;\r\n      <button type=\"button\" class=\"btn btn-primary btn-elevate\" (click)=\"eliminarDocumento()\">Eliminar</button>\r\n    </div>\r\n  </div>\r\n\r\n\r\n","import { NgModule } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { NgbDateParserFormatter, NgbModalModule, NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { NgbDateCustomParserFormatter } from \"src/app/services/date-formatter.service\";\r\nimport { NuevoComponent } from \"./nuevo/nuevo.component\";\r\nimport { ListadoComponent } from \"./listado/listado.component\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { MatCheckboxModule } from \"@angular/material/checkbox\";\r\nimport { GeneralModule } from \"src/app/_metronic_gestion/partials/content/general/general.module\";\r\nimport { InlineSVGModule } from \"ng-inline-svg\";\r\nimport { CRUDTableModule } from \"src/app/_metronic_gestion/shared/crud-table\";\r\nimport { DocumentacionModalComponent } from './nuevo/documentacion-modal/documentacion-modal.component';\r\nimport { EliminarDocumentacionModalComponent } from './nuevo/eliminar-documentacion-modal/eliminar-documentacion-modal.component';\r\nimport { EnlaceModalComponent } from './nuevo/enlace-modal/enlace-modal.component';\r\nimport { EliminarEnlaceModalComponent } from './nuevo/eliminar-enlace-modal/eliminar-enlace-modal.component';\r\nimport { EliminarConvenioComponent } from './nuevo/eliminar-convenio/eliminar-convenio.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n      NuevoComponent,\r\n      ListadoComponent,\r\n      DocumentacionModalComponent,\r\n      EliminarDocumentacionModalComponent,\r\n      EnlaceModalComponent,\r\n      EliminarEnlaceModalComponent,\r\n      EliminarConvenioComponent\r\n    ],\r\n    imports: [\r\n      RouterModule.forChild([\r\n        {\r\n          path: 'nuevo',\r\n          component: NuevoComponent,\r\n        },\r\n        {\r\n          path: 'gestion/:id',\r\n          component: NuevoComponent,\r\n        },\r\n        {\r\n          path: 'listado',\r\n          component: ListadoComponent,\r\n        }\r\n      ]),\r\n      CommonModule,\r\n      NgbModule,\r\n      MatCheckboxModule,\r\n      GeneralModule,\r\n      InlineSVGModule,\r\n      CRUDTableModule,\r\n      \r\n      FormsModule,\r\n      ReactiveFormsModule\r\n    ],\r\n    providers: [\r\n      { provide: NgbDateParserFormatter, useClass: NgbDateCustomParserFormatter }  // <-- add this\r\n    ],\r\n    entryComponents: [\r\n      DocumentacionModalComponent,\r\n      EliminarDocumentacionModalComponent,\r\n      EnlaceModalComponent,\r\n      EliminarEnlaceModalComponent,\r\n      EliminarConvenioComponent\r\n    ]\r\n  })\r\n  export class ConveniosModule {}","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Documento } from 'src/app/models/Documento';\r\n\r\n@Component({\r\n  selector: 'app-documentacion-modal',\r\n  templateUrl: './documentacion-modal.component.html',\r\n  styleUrls: ['./documentacion-modal.component.scss']\r\n})\r\nexport class DocumentacionModalComponent implements OnInit {\r\n  @Input() documento: Documento;\r\n  @Output() passEntry: EventEmitter<any> = new EventEmitter();\r\n  \r\n  formGroup: FormGroup;\r\n\r\n  constructor(private fb: FormBuilder, public modal: NgbActiveModal) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadForm();\r\n  }\r\n\r\n  loadForm() {\r\n    this.formGroup = this.fb.group({\r\n      nombre: [this.documento.nombre, [Validators.required]],\r\n      file: [null]\r\n    });\r\n  }\r\n\r\n  onChange (event) \r\n  {\r\n    const file = (event.target as HTMLInputElement).files[0];\r\n    this.formGroup.patchValue({\r\n      file: file\r\n    });\r\n    this.formGroup.get('file').updateValueAndValidity();\r\n  }\r\n\r\n  guardar ()\r\n  {\r\n    const formData = this.formGroup.value;\r\n    if (!this.documento.id)\r\n    {\r\n      this.documento.id = Math.floor((Math.random()*6)+1);\r\n    }\r\n    this.documento.nombre = formData.nombre;\r\n    this.documento.file= formData.file;\r\n    this.documento.tamanio = this.niceBytes(formData.file.size);\r\n    this.passEntry.emit(this.documento);\r\n    this.modal.close(this.documento);\r\n    this.formGroup.reset();\r\n  }\r\n\r\n  niceBytes(x){\r\n    const units = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n     let l = 0, n = parseInt(x, 10) || 0;\r\n     while(n >= 1024 && ++l){\r\n         n = n/1024;\r\n     }\r\n     return(n.toFixed(n < 10 && l > 0 ? 1 : 0) + ' ' + units[l]);\r\n   }\r\n}\r\n","<div class=\"modal-content\">\r\n    <div class=\"modal-header\">\r\n        <ng-container *ngIf=\"documento\">\r\n            <h3 class=\"card-label\" *ngIf=\"documento.id\">Editar documento</h3>\r\n            <h3 class=\"card-label\" *ngIf=\"!documento.id\">Nuevo documento</h3>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"overlay overlay-block cursor-default modal-body\" style=\"min-height: 204px\">\r\n        <ng-container *ngIf=\"documento\">\r\n            <form action=\"#\" class=\"form form-label-right\" [formGroup]=\"formGroup\">\r\n                <div class=\"form-group row\">\r\n                    <div class=\"col-lg-12\">\r\n                        <label class=\"form-label\">Nombre del documento</label>\r\n                        <input type=\"text\" class=\"form-control form-control-lg form-control-solid\"\r\n                          formControlName=\"nombre\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <input #fileInput type=\"file\" accept=\"application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint,\r\n                    text/plain, application/pdf, image/*\" (change)=\"onChange($event)\">\r\n                </div>\r\n            </form>\r\n        </ng-container> \r\n    </div>\r\n    <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-light btn-elevate mr-2\" (click)=\"modal.dismiss()\">Cancelar</button>\r\n        <ng-container *ngIf=\"documento\">\r\n            <button type=\"button\" class=\"btn btn-primary btn-elevate\" (click)=\"guardar()\" [disabled]=\"formGroup.invalid\" >Guardar </button>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Component({\r\n  selector: 'app-eliminar-enlace-modal',\r\n  templateUrl: './eliminar-enlace-modal.component.html',\r\n  styleUrls: ['./eliminar-enlace-modal.component.scss']\r\n})\r\nexport class EliminarEnlaceModalComponent implements OnInit {\r\n\r\n  @Input() id: number;\r\n\r\n  constructor(public modal: NgbActiveModal) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  eliminarEnlace ()\r\n  {\r\n    this.modal.close();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n    <div class=\"modal-title h4\">Eliminar enlace</div>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <span>¿Estás seguro de eliminar este enlace?</span>\r\n  </div>\r\n  \r\n  <div class=\"modal-footer\">\r\n    <div>\r\n      <button type=\"button\" class=\"btn btn-light btn-elevate mr-1\" (click)=\"modal.dismiss()\">Cancelar</button>&nbsp;\r\n      <button type=\"button\" class=\"btn btn-primary btn-elevate\" (click)=\"eliminarEnlace()\">Eliminar</button>\r\n    </div>\r\n  </div>\r\n"]}