{"version":3,"sources":["webpack:///src/app/portal/convenios/convenios.module.ts","webpack:///src/app/pipes/convenio.pipe.ts","webpack:///src/app/portal/convenios/convenios.component.ts","webpack:///src/app/portal/convenios/convenios.component.html"],"names":["ConveniosModule","forChild","path","component","declarations","imports","ConvenioPipe","items","callback","filter","item","name","pure","ConveniosComponent","ref","conveniosServices","uploadService","subscriptions","API_URL","apiUrl","paginate","fetch","sb","isLoading$","subscribe","res","isLoading","push","list","obtenerConvenios","paginator","conv","mostrar","patchState","num","page","emit","paginate2","url","original","download","x","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","dispatchEvent","MouseEvent","bubbles","cancelable","view","setTimeout","revokeObjectURL","remove","answers","Object","keys","map","key","forEach","unsubscribe","selector","templateUrl","styleUrls"],"mappings":"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","file":"portal-convenios-convenios-module-es5.js","sourcesContent":["import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { NgbDropdownModule, NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { NgApexchartsModule } from \"ng-apexcharts\";\r\nimport { InlineSVGModule } from \"ng-inline-svg\";\r\nimport { DropdownMenusModule } from \"src/app/_metronic_portal/partials/content/dropdown-menus/dropdown-menus.module\";\r\nimport { ConveniosComponent } from \"./convenios.component\";\r\nimport { CRUDTableModule } from 'src/app/_metronic_portal/shared/crud-table';\r\nimport { ConvenioPipe } from \"../../pipes/convenio.pipe\";\r\n\r\n@NgModule({\r\n    declarations: [ConveniosComponent, ConvenioPipe],\r\n    imports: [\r\n      CommonModule,\r\n      RouterModule.forChild([\r\n        {\r\n          path: '',\r\n          component: ConveniosComponent,\r\n        }\r\n      ]),\r\n      DropdownMenusModule,\r\n      InlineSVGModule,\r\n      NgApexchartsModule,\r\n      NgbDropdownModule,\r\n      NgbModule,\r\n      CRUDTableModule\r\n    ],\r\n  })\r\n  export class ConveniosModule {}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'myfilterConvenio',\r\n    pure: false\r\n})\r\nexport class ConvenioPipe implements PipeTransform {\r\n    transform(items: any[], callback: (item: any) => boolean): any {\r\n        if (!items || !callback) {\r\n            return items;\r\n        }\r\n        return items.filter(item => callback(item));\r\n    }\r\n}","import { ChangeDetectorRef, Component, OnDestroy, OnInit,Output,EventEmitter } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Convenio } from 'src/app/models/Convenio';\r\nimport { ConveniosService } from 'src/app/services/convenio.service';\r\nimport { UploadService } from 'src/app/services/upload.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  PaginatorState,\r\n} from 'src/app/_metronic_portal/shared/crud-table';\r\n\r\n@Component({\r\n  selector: 'app-convenios',\r\n  templateUrl: './convenios.component.html',\r\n  styleUrls: ['./convenios.component.scss']\r\n})\r\nexport class ConveniosComponent implements OnInit, OnDestroy {\r\n  paginator: PaginatorState;\r\n  isLoading: boolean;\r\n  private subscriptions: Subscription[] = [];\r\n  list: Observable<Convenio[]>;\r\n\r\n  API_URL = `${environment.apiUrl}`;\r\n\r\n  message: string;\r\n  @Output() paginate: EventEmitter<PaginatorState> = new EventEmitter();\r\n\r\n  constructor(private ref: ChangeDetectorRef, public conveniosServices: ConveniosService, private uploadService: UploadService) {  }\r\n\r\n  ngOnInit() {\r\n    this.conveniosServices.fetch();\r\n    const sb = this.conveniosServices.isLoading$.subscribe(res => this.isLoading = res);\r\n    this.subscriptions.push(sb);\r\n    this.list = this.conveniosServices.obtenerConvenios();\r\n    this.paginator = this.conveniosServices.paginator;\r\n    this.conveniosServices.fetch();\r\n  }\r\n\r\n  filterConvenio(conv: Convenio) {\r\n    return conv.mostrar == true\r\n  }\r\n\r\n    // pagination\r\n    paginate2(paginator: PaginatorState) {\r\n      this.conveniosServices.patchState({ paginator });\r\n      }\r\n  \r\n      \r\n    pageChange(num: number) {\r\n      this.paginator.page = num;\r\n      this.paginate.emit(this.paginator);\r\n      this.paginate2(this.paginator);\r\n    }\r\n  \r\n  \r\n  download(url, original): void {\r\n    this.uploadService.download(url).subscribe((x) => {\r\n        var newBlob = new Blob([x], { type: \"application/pdf\" });\r\n        const data = window.URL.createObjectURL(newBlob);\r\n        \r\n        var link = document.createElement('a');\r\n        link.href = data;\r\n        link.download = original;\r\n        link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\r\n        \r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(data);\r\n            link.remove();\r\n        }, 100);\r\n    });\r\n  }\r\n\r\n  toArrayDocumentos(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  toArrayEnlaces(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n  }\r\n\r\n}\r\n","<div class=\"barataria-image\"></div>\r\n\r\n<div class=\"container\">\r\n  <div class=\"row\">\r\n    <div class=\"col-md-6\" *ngFor=\"let convenio of conveniosServices.items$ | async | myfilterConvenio: filterConvenio\">\r\n      <div class=\"card card-custom bg-gray-100 card-stretch gutter-b\">\r\n        <!-- Header -->\r\n        <div class=\"card-header border-0 bg-barataria2 py-5  text-right\">\r\n          <div class=\"col-md-4 order-2 order-md-1 text-center p-0\" style=\"display: block;margin: auto;\"> \r\n            <div *ngIf=\"convenio.listDocumentos?.length > 0;then contieneEnlace else noContieneEnlace\"></div>\r\n            <ng-template #contieneEnlace>\r\n              <div class=\"p-2\" *ngFor=\"let documento of toArrayEnlaces(convenio.listDocumentos)\">\r\n                <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\" >\r\n                  <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{convenio.imagenServidorBase64}} />\r\n                </a>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template #noContieneEnlace>\r\n              <img class=\"img-fluid img-thumbnail img-responsive\" style=\"min-height: 100px !important;\" alt=\"Logo\" src={{convenio.imagenServidorBase64}} />\r\n            </ng-template> \r\n          </div>\r\n          \r\n          <div class=\"col-md-8 order-1 order-md-2\">\r\n            <div class=\"text-center mb-5 pt-5\">\r\n              <div *ngIf=\"convenio.listDocumentos?.length > 0;then contieneEnlace2 else noContieneEnlace2\"></div>\r\n              <ng-template #contieneEnlace2>\r\n                <div class=\"p-2\" *ngFor=\"let documento of toArrayEnlaces(convenio.listDocumentos)\">\r\n                  <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\"  class=\"stretched-link\"><h1 class=\"display-4\">{{convenio.titulo}}</h1></a>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template #noContieneEnlace2>\r\n                <h1 class=\"font-weight-bolder mb-0\">{{convenio.titulo}}</h1>\r\n              </ng-template> \r\n            </div>\r\n          </div>\r\n  \r\n        </div>\r\n        <!-- Body -->\r\n        <div class=\"card-body p-0 position-relative overflow-hidden\">\r\n          <div id=\"kt_mixed_widget_1_chart\" class=\"card-rounded-bottom bg-barataria2\" [style.height]=\"'50px'\">\r\n          </div>\r\n          <!--begin::Stats-->\r\n          <div class=\"card-spacer mt-n25\">\r\n            <!--begin::Row-->\r\n            <div class=\"row m-0\">\r\n              <div class=\"col bg-white px-6 py-8 rounded-xl mb-7\" style=\"border: 3px solid #D6CDA4;\">\r\n                <p class=\"text-dark font-weight-bold font-size-h6\">{{convenio.texto}}</p>\r\n              </div>\r\n            </div>\r\n            <!--end::Row-->\r\n            <div ngbDropdown *ngIf=\"convenio.listEnlaces?.length > 0\" class=\"row\">\r\n              <div *ngFor=\"let enlace of toArrayDocumentos(convenio.listEnlaces)\" class=\"col-12 px-4 py-2\">\r\n                <a href=\"{{enlace.url}}\" target=\"_blank\" class=\"stretched-link \"><i class=\"fas fa-globe\"></i><span class=\"ml-2\">{{enlace.nombre}}</span></a>\r\n            </div>\r\n            </div>\r\n\r\n          </div>\r\n          <!--end::Stats-->\r\n        </div>\r\n      </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"row\" *ngIf=\"(list | async)?.length > 10\">\r\n  <div class=\"col-12 text-center py-2\">\r\n    <div class=\"py-2 mr-3 text-center\">\r\n      <ng-pagination\r\n        [collectionSize]=\"paginator.total\"\r\n        [(page)]=\"paginator.page\"\r\n        [maxSize]=\"4\"\r\n        [rotate]=\"true\"\r\n        [boundaryLinks]=\"true\"\r\n        [pageSize]=\"paginator.pageSize\"\r\n        (pageChange)=\"pageChange($event)\"\r\n      ></ng-pagination>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n</div>\r\n\r\n\r\n   "]}