{"version":3,"sources":["webpack:///src/app/portal/actividades/actividades.component.ts","webpack:///src/app/portal/actividades/actividades.component.html","webpack:///src/app/portal/actividades/actividades.module.ts"],"names":["ActividadesComponent","ref","actividadesService","uploadService","subscriptions","API_URL","apiUrl","sb","obtenerActividades","subscribe","res","list","push","detectChanges","url","original","download","x","newBlob","Blob","type","data","window","URL","createObjectURL","link","document","createElement","href","dispatchEvent","MouseEvent","bubbles","cancelable","view","setTimeout","revokeObjectURL","remove","actividad","cadena","fechaInicio","add","locale","format","fechaFin","answers","Object","keys","map","key","forEach","unsubscribe","selector","templateUrl","styleUrls","ActividadesModule","forChild","path","component","declarations","imports"],"mappings":"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","file":"portal-actividades-actividades-module-es5.js","sourcesContent":["import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport * as moment from 'moment';\r\nimport { Subscription } from 'rxjs';\r\nimport { Actividad } from 'src/app/models/Actividad';\r\nimport { ActividadesService } from 'src/app/services/actividad.service';\r\nimport { UploadService } from 'src/app/services/upload.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-actividades',\r\n  templateUrl: './actividades.component.html',\r\n  styleUrls: ['./actividades.component.scss']\r\n})\r\nexport class ActividadesComponent implements OnInit, OnDestroy {\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  API_URL = `${environment.apiUrl}`;\r\n  list: Actividad [];\r\n\r\n  message: string;\r\n\r\n  constructor(private ref: ChangeDetectorRef, public actividadesService: ActividadesService, private uploadService: UploadService) {  }\r\n\r\n  ngOnInit() {\r\n    const sb = this.actividadesService.obtenerActividades().subscribe(res => {\r\n      this.list = res;\r\n    });\r\n    this.subscriptions.push(sb);\r\n    this.ref.detectChanges();\r\n  }\r\n\r\n  \r\n  download(url, original): void {\r\n    this.uploadService.download(url).subscribe((x) => {\r\n        var newBlob = new Blob([x], { type: \"application/pdf\" });\r\n        const data = window.URL.createObjectURL(newBlob);\r\n        \r\n        var link = document.createElement('a');\r\n        link.href = data;\r\n        link.download = original;\r\n        link.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\r\n        \r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(data);\r\n            link.remove();\r\n        }, 100);\r\n    });\r\n  }\r\n\r\n  convertDate (actividad : Actividad)\r\n  {\r\n    let cadena = \"\";\r\n    let fechaInicio = moment(actividad.fechaInicio).add(-1, 'M').locale('es');\r\n   \r\n    if (actividad.fechaInicio != null) {\r\n      cadena = fechaInicio.format('DD') + \" de \" + fechaInicio.format('MMMM') + \" del \" + fechaInicio.format('YYYY');\r\n\r\n      if (actividad.fechaFin != null &&  actividad.fechaInicio != actividad.fechaFin) {\r\n        let fechaFin = moment(actividad.fechaFin).add(-1, 'M').locale('es');\r\n        cadena += \" - \" + fechaFin.format('DD') + \" de \" + fechaFin.format('MMMM') + \" del \" + fechaFin.format('YYYY');\r\n      } \r\n    } \r\n   \r\n    return cadena;\r\n  }\r\n\r\n  toArrayDocumentos(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  toArrayEnlaces(answers: object) {\r\n    return Object.keys(answers).map(key => answers[key])\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach((sb) => sb.unsubscribe());\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-md-6\" *ngFor=\"let actividad of list\">\r\n    <div class=\"card card-custom bg-gray-100 card-stretch gutter-b\">\r\n      <!-- Header -->\r\n      <div class=\"card-header border-0 bg-barataria py-5  text-right\">\r\n\r\n            <div class=\"col-md-4 order-2 order-md-1 text-center p-0\" style=\"display: block;margin: auto;\"> \r\n              <img class=\"img-fluid img-thumbnail\" alt=\"Logo\" src={{actividad.imagenServidorBase64}} />\r\n            </div>\r\n        \r\n            <div class=\"col-md-8 order-1 order-md-2\">\r\n                <div class=\"row pb-5\">\r\n                  <div class=\"col-12\">\r\n                    <div ngbDropdown placement=\"bottom-right\" class=\"dropdown dropdown-inline text-right\" title=\"Quick actions\">\r\n                      <div ngbDropdown *ngIf=\"actividad.listDocumentos?.length > 0\" class=\"d-inline-block\">\r\n                        <button class=\"btn btn-transparent-white btn-sm font-weight-bolder dropdown-toggle px-5 dropdown-toggle btn btn-transparent\" id=\"dropdownBasic1\" ngbDropdownToggle>Documentaci√≥n</button>\r\n                        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownBasic1\" ngbDropdownMenu >\r\n                            <div class=\"p-2\" *ngFor=\"let documento of toArrayDocumentos(actividad.listDocumentos)\">\r\n                              <a (click)=\"download(documento.url, documento.nombre)\" target=\"_blank\">{{documento.nombre}}</a>\r\n                            </div>\r\n                        </div>\r\n                      </div>\r\n          \r\n                      <div ngbDropdown *ngIf=\"actividad.listEnlaces?.length > 0\" class=\"d-inline-block\">\r\n                        <button class=\"btn btn-transparent-white btn-sm font-weight-bolder dropdown-toggle px-5 dropdown-toggle btn btn-transparent ml-2\" id=\"dropdownBasic2\" ngbDropdownToggle>Enlaces</button>\r\n                        <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"dropdownBasic2\" ngbDropdownMenu >\r\n                          <div class=\"p-2\" *ngFor=\"let enlace of toArrayEnlaces(actividad.listEnlaces)\">\r\n                            <a href=\"{{enlace.url}}\" target=\"_blank\">{{enlace.nombre}}</a>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n          \r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row pt-10\">\r\n                  <div class=\"col-12 text-center mb-5\">\r\n                    <h2 class=\"font-weight-bolder text-white mb-0\">{{actividad.titulo}}</h2>\r\n                    <p class=\"font-weight-bolder mt-4 text-white\">{{ convertDate(actividad) }}</p>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n\r\n      </div>\r\n      <!-- Body -->\r\n      <div class=\"card-body p-0 position-relative overflow-hidden\">\r\n        <div id=\"kt_mixed_widget_1_chart\" class=\"card-rounded-bottom bg-barataria\" [style.height]=\"'50px'\">\r\n        </div>\r\n        <!--begin::Stats-->\r\n        <div class=\"card-spacer mt-n25\">\r\n          <!--begin::Row-->\r\n          <div class=\"row m-0\">\r\n              <div class=\"col bg-white px-6 py-8 rounded-xl mr-7 mb-7\" style=\"border: 3px solid #027762;\">\r\n              <p class=\"text-dark font-weight-bold font-size-h6\">{{actividad.texto}}</p>\r\n            </div>\r\n          </div>\r\n          <!--end::Row-->\r\n        </div>\r\n        <!--end::Stats-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n ","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { NgbDropdown, NgbDropdownModule, NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { NgApexchartsModule } from \"ng-apexcharts\";\r\nimport { InlineSVGModule } from \"ng-inline-svg\";\r\nimport { DropdownMenusModule } from \"src/app/_metronic_portal/partials/content/dropdown-menus/dropdown-menus.module\";\r\nimport { ActividadesComponent } from \"./actividades.component\";\r\n\r\n@NgModule({\r\n    declarations: [ActividadesComponent],\r\n    imports: [\r\n      CommonModule,\r\n      RouterModule.forChild([\r\n        {\r\n          path: '',\r\n          component: ActividadesComponent,\r\n        }\r\n      ]),\r\n      DropdownMenusModule,\r\n      InlineSVGModule,\r\n      NgApexchartsModule,\r\n      NgbDropdownModule,\r\n      NgbModule\r\n    ],\r\n  })\r\n  export class ActividadesModule {}"]}